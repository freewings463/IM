# 系统分析（internal/ + pkg/）

- 生成时间: 2026-01-18 15:30:19
- 覆盖: internal/ 与 pkg/ 下所有非测试代码文件（.go/.proto）
- 每条职责≤400字，包含：位置/角色、导入/依赖、导出、关键函数/方法、注释目标（若有）

## 目录结构（tree -L 4 -I '*_test.go' internal pkg）

```text
internal
├── api
│   ├── channel.go
│   ├── channel_model.go
│   ├── cluster.go
│   ├── conn.go
│   ├── connz.go
│   ├── conversation.go
│   ├── conversation_model.go
│   ├── docs.go
│   ├── event.go
│   ├── event_model.go
│   ├── manager.go
│   ├── message.go
│   ├── message_model.go
│   ├── README.md
│   ├── request.go
│   ├── route.go
│   ├── server.go
│   ├── server_http.go
│   ├── server_manager.go
│   ├── stream.go
│   ├── stress.go
│   ├── tag.go
│   ├── task_migrate.go
│   ├── user.go
│   └── varz.go
├── channel
│   ├── event
│   │   ├── eventlist.go
│   │   ├── handler.go
│   │   ├── poller.go
│   │   └── pool.go
│   ├── handler
│   │   ├── base.go
│   │   ├── event_conversation.go
│   │   ├── event_distribute.go
│   │   ├── event_onsend.go
│   │   ├── event_onstream.go
│   │   ├── event_permission.go
│   │   ├── event_persist.go
│   │   ├── event_sendack.go
│   │   ├── event_webhook.go
│   │   └── proto.go
│   └── README.md
├── common
│   └── common.go
├── errors
│   └── tag.go
├── eventbus
│   ├── channel.go
│   ├── conn.go
│   ├── context.go
│   ├── eventbus.go
│   ├── event.go
│   ├── event_queue.go
│   ├── pusher.go
│   ├── README.md
│   └── user.go
├── ingress
│   ├── client.go
│   ├── model.go
│   └── server.go
├── manager
│   ├── bucket.go
│   ├── in_flight_pqueue.go
│   ├── manager_conn.go
│   ├── manager_conversation.go
│   ├── manager_retry.go
│   ├── manager_systemaccount.go
│   ├── manager_tag.go
│   ├── README.md
│   └── retry_queue.go
├── options
│   ├── common.go
│   ├── options.go
│   └── README.md
├── plugin
│   ├── api.go
│   ├── model.go
│   ├── options.go
│   ├── plugin.go
│   ├── plugin_manager.go
│   ├── rpc_cluster.go
│   ├── rpc_conversation.go
│   ├── rpc.go
│   ├── rpc_message.go
│   ├── rpc_plugin.go
│   ├── rpc_stream.go
│   └── server.go
├── pusher
│   ├── event
│   │   ├── handler.go
│   │   ├── poller.go
│   │   └── pool.go
│   └── handler
│       ├── base.go
│       ├── event_pushoffline.go
│       └── event_pushonline.go
├── README.md
├── server
│   ├── common.go
│   ├── datasource.go
│   ├── proto.go
│   ├── proxyproto.go
│   ├── README.md
│   ├── server_cluster.go
│   ├── server_demo.go
│   ├── server.go
│   └── testutil.go
├── service
│   ├── cache.go
│   ├── cluster.go
│   ├── common.go
│   ├── manager_conn.go
│   ├── manager_conversation.go
│   ├── manager_plugin.go
│   ├── manager_retry.go
│   ├── manager_systemaccount.go
│   ├── manager_tag.go
│   ├── permission.go
│   ├── README.md
│   ├── store.go
│   └── webhook.go
├── track
│   ├── README.md
│   └── track.go
├── types
│   ├── event_api.go
│   ├── message.go
│   ├── plugin.go
│   ├── pluginproto
│   │   ├── plugin.go
│   │   ├── plugin.pb.go
│   │   ├── plugin.proto
│   │   └── README.md
│   ├── README.md
│   ├── tag.go
│   └── webhook.go
├── user
│   ├── event
│   │   ├── conns.go
│   │   ├── eventlist.go
│   │   ├── handler.go
│   │   ├── poller.go
│   │   └── pool.go
│   ├── handler
│   │   ├── base.go
│   │   ├── event_close.go
│   │   ├── event_connack.go
│   │   ├── event_connect.go
│   │   ├── event_onsend.go
│   │   ├── event_ping.go
│   │   ├── event_recvack.go
│   │   ├── event_write.go
│   │   └── proto.go
│   └── README.md
└── webhook
    ├── README.md
    └── webhook.go
pkg
├── auth
│   ├── auth.go
│   ├── errors.go
│   └── resource
│       └── resource.go
├── bytequeue
│   └── queue.go
├── client
│   ├── buffer.go
│   ├── client.go
│   ├── client.go_bak
│   ├── common.go
│   ├── const.go
│   ├── options.go
│   └── timer.go
├── cluster
│   ├── channel
│   │   ├── channel.go
│   │   ├── errors.go
│   │   ├── event_raftgroup.go
│   │   ├── iserver.go
│   │   ├── options.go
│   │   ├── server.go
│   │   └── storage.go
│   ├── cluster
│   │   ├── adaptive_send_queue.go
│   │   ├── api_channel.go
│   │   ├── api_cluster.go
│   │   ├── api_conversation.go
│   │   ├── api_devtools.go
│   │   ├── api_message.go
│   │   ├── api_node.go
│   │   ├── api_slot.go
│   │   ├── api_user.go
│   │   ├── common.go
│   │   ├── const.go
│   │   ├── election_channel.go
│   │   ├── election_slot.go
│   │   ├── errors.go
│   │   ├── event.go
│   │   ├── iserver.go
│   │   ├── model.go
│   │   ├── node.go
│   │   ├── node_improved.go
│   │   ├── node_manager.go
│   │   ├── options.go
│   │   ├── rate.go
│   │   ├── rpc_client.go
│   │   ├── rpc_server.go
│   │   ├── send_queue_config.go
│   │   ├── server_api.go
│   │   ├── server.go
│   │   ├── server_join.go
│   │   ├── test.go
│   │   ├── transport_channel.go
│   │   ├── transport_node.go
│   │   └── transport_slot.go
│   ├── icluster
│   │   ├── channel.go
│   │   ├── cluster.go
│   │   ├── node.go
│   │   ├── rpc.go
│   │   ├── slot.go
│   │   └── store.go
│   ├── node
│   │   ├── clusterconfig
│   │   │   ├── cmd.go
│   │   │   ├── config.go
│   │   │   ├── errors.go
│   │   │   ├── event.go
│   │   │   ├── key
│   │   │   ├── options.go
│   │   │   ├── server_apply.go
│   │   │   ├── server.go
│   │   │   ├── server_propose.go
│   │   │   ├── storage.go
│   │   │   └── transport.go
│   │   ├── event
│   │   │   ├── event.go
│   │   │   ├── handle_node_joining.go
│   │   │   ├── handle_onlinestatus.go
│   │   │   ├── handler_clusterinit.go
│   │   │   ├── handler_compare.go
│   │   │   ├── handler.go
│   │   │   ├── handle_slot_election.go
│   │   │   ├── handle_slotleader_balance.go
│   │   │   ├── queue.go
│   │   │   └── server.go
│   │   ├── handler
│   │   │   └── handler.go
│   │   └── types
│   │       ├── config.go
│   │       ├── config.pb.go
│   │       ├── config.proto
│   │       ├── event.go
│   │       └── README.md
│   ├── README.md
│   ├── slot
│   │   ├── event.go
│   │   ├── iserver.go
│   │   ├── key
│   │   │   └── key.go
│   │   ├── options.go
│   │   ├── server.go
│   │   ├── slot.go
│   │   └── storage_pebble.go
│   └── store
│       ├── channel_clusterconfig.go
│       ├── channel.go
│       ├── conversation.go
│       ├── message.go
│       ├── model.go
│       ├── options.go
│       ├── plugin.go
│       ├── store_apply.go
│       ├── store.go
│       ├── stream.go
│       ├── tester.go
│       ├── user.go
│       └── version.go
├── errors
│   └── errors.go
├── fasthash
│   └── fasthash.go
├── fasttime
│   └── fasttime.go
├── grpcpool
│   └── pool.go
├── jsonrpc
│   ├── codec.go
│   ├── example_event.go
│   ├── example_new_fields.go
│   ├── protocol.md
│   ├── README.md
│   ├── README_zh.md
│   ├── types.go
│   └── wukongim_rpc_schema.json
├── keylock
│   └── keylock.go
├── mqtt
│   ├── connect.go
│   ├── const.go
│   ├── controlPacket.go
│   └── protocol.go
├── network
│   └── network.go
├── pool
│   ├── byteslice
│   │   └── byteslice.go
│   └── ringbuffer
│       └── ringbuffer.go
├── promtail
│   ├── options.go
│   └── promtail.go
├── pse
│   ├── freebsd.txt
│   ├── pse_darwin.go
│   ├── pse_freebsd_amd64.go
│   ├── pse_freebsd.go
│   ├── pse_linux.go
│   ├── pse_openbsd.go
│   ├── pse_rumprun.go
│   ├── pse_solaris.go
│   ├── pse_wasm.go
│   └── pse_windows.go
├── raft
│   ├── raft
│   │   ├── common.go
│   │   ├── errors.go
│   │   ├── model.go
│   │   ├── node_become.go
│   │   ├── node_config.go
│   │   ├── node.go
│   │   ├── node_send.go
│   │   ├── node_step.go
│   │   ├── node_tick.go
│   │   ├── options.go
│   │   ├── queue.go
│   │   ├── raft.go
│   │   ├── raft_propose.go
│   │   ├── README.md
│   │   ├── storage.go
│   │   ├── transport.go
│   │   └── wait.go
│   ├── raftgroup
│   │   ├── errors.go
│   │   ├── event.go
│   │   ├── event_queue.go
│   │   ├── handle.go
│   │   ├── list.go
│   │   ├── options.go
│   │   ├── raft.go
│   │   ├── raftgroup.go
│   │   ├── raftgroup_propose.go
│   │   ├── rate_limter.go
│   │   ├── storage.go
│   │   ├── transport.go
│   │   ├── types.go
│   │   └── wait.go
│   ├── track
│   │   ├── README.md
│   │   └── track.go
│   └── types
│       ├── errros.go
│       └── types.go
├── ring
│   ├── ring_buffer.go
│   └── ring_buffer_unix.go
├── ringlock
│   └── ringlock.go
├── trace
│   ├── common.go
│   ├── empty.go
│   ├── metrics_app.go
│   ├── metrics_cluster.go
│   ├── metrics_db.go
│   ├── metrics_default.go
│   ├── metrics.go
│   ├── metrics_system.go
│   ├── options.go
│   ├── otel.go
│   └── trace.go
├── wait
│   └── wait.go
├── wkcache
│   ├── README.md
│   └── stream.go
├── wkdb
│   ├── allowlist.go
│   ├── cache_channel_cluster_config.go
│   ├── cache_channel.go
│   ├── cache_channel_seq.go
│   ├── cache_conversation.go
│   ├── cache_device.go
│   ├── cache_manager.go
│   ├── cache_permission.go
│   ├── cache_user_last_msg_seq.go
│   ├── channel_cluster_config.go
│   ├── channel.go
│   ├── conversation.go
│   ├── db.go
│   ├── denylist.go
│   ├── device.go
│   ├── errors.go
│   ├── key
│   │   ├── key.go
│   │   └── table.go
│   ├── leader_term_sequence.go
│   ├── lock.go
│   ├── message.go
│   ├── message_notify_queue.go
│   ├── model.go
│   ├── options.go
│   ├── performance_analyzer.go
│   ├── performance_monitor.go
│   ├── plugin.go
│   ├── plugin_user.go
│   ├── shardb.go
│   ├── stream.go
│   ├── streamv2.go
│   ├── subscriber.go
│   ├── systemuid.go
│   ├── tester.go
│   ├── total.go
│   ├── user.go
│   └── wukongdb.go
├── wkhook
│   ├── README.md
│   ├── webhook_grpc.pb.go
│   ├── webhook.pb.go
│   └── webhook.proto
├── wkhttp
│   ├── http.go
│   └── logger.go
├── wklog
│   ├── logger.go
│   └── options.go
├── wknet
│   ├── acceptor.go
│   ├── acceptor_windows.go
│   ├── buffer.go
│   ├── conn.go
│   ├── const.go
│   ├── engine.go
│   ├── event.go
│   ├── io
│   │   ├── io_bsd.go
│   │   └── io_linux.go
│   ├── listener.go
│   ├── listener_windows.go
│   ├── net_fd.go
│   ├── net_fd_windows.go
│   ├── netpoll
│   │   ├── const.go
│   │   ├── epoll_default_poller.go
│   │   ├── epoll_events.go
│   │   ├── kqueue_default_poller.go
│   │   ├── kqueue_events.go
│   │   ├── sys_epoll_linux_arm64.go
│   │   ├── sys_epoll_linux.go
│   │   └── sys_epoll_linux_loong64.go
│   ├── options.go
│   ├── reactor_main.go
│   ├── reactor_sub.go
│   ├── reactor_sub_windows.go
│   ├── README.md
│   ├── ring_buffer.go
│   ├── socket
│   │   ├── sock_bsd.go
│   │   ├── sock_cloexec.go
│   │   ├── socket.go
│   │   ├── sock_linux.go
│   │   ├── sockopts_darwin.go
│   │   ├── sockopts_posix.go
│   │   ├── sockopts_unix.go
│   │   ├── sock_posix.go
│   │   ├── socktoaddr.go
│   │   ├── sys_cloexec.go
│   │   ├── tcp_socket.go
│   │   ├── udp_socket.go
│   │   └── unix_socket.go
│   ├── utils.go
│   ├── utils_windows.go
│   └── websocket.go
├── wkserver
│   ├── client
│   │   ├── client.go
│   │   ├── conn.go
│   │   ├── context.go
│   │   ├── event.go
│   │   └── options.go
│   ├── conn_context.go
│   ├── conn_manager.go
│   ├── message_queue.go
│   ├── metrics.go
│   ├── model.go
│   ├── options.go
│   ├── proto
│   │   ├── protocol.go
│   │   ├── README.md
│   │   └── request.go
│   ├── rate.go
│   ├── server_event.go
│   ├── server.go
│   └── test
└── wkutil
    ├── aes.go
    ├── arrays.go
    ├── bitmap.go
    ├── channel.go
    ├── common.go
    ├── convert.go
    ├── data_pipeline.go
    ├── dedup.go
    ├── dh.go
    ├── encode.go
    ├── fifo.go
    ├── file.go
    ├── hash.go
    ├── ip.go
    ├── json.go
    ├── md5.go
    ├── parse.go
    ├── rate.go
    ├── ring_buffer.go
    ├── time.go
    ├── uuid.go
    └── wait_group.go

54 directories, 314 files
```

## 文件职责清单（≤400字/条）

| 文件 | 职责摘要 |
| --- | --- |
| `internal/api/channel.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/pkg/errors 等 2 项，内部 github.com/WuKongIM/WuKongIM/internal/ingress 等 8 项；导出: PullMode, BindJSON, PullModeDown, PullModeUp；关键函数/方法: BindJSON, (*channel).route, (*channel).channelCreateOrUpdate, (*channel).updateOrAddChannelInfo, (*channel).addSubscriber, (*channel).addSubscriberWithReq, (*channel).addSubscribers 等 22 项；用于 该包实现 channel 相关逻辑。 |
| `internal/api/channel_model.go` | 位于 internal/api 的模型定义。导入/依赖: 外部 github.com/pkg/errors，内部 github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: 无；关键函数/方法: (channelInfoReq).ToChannelInfo, (channelCreateReq).Check, (subscriberAddReq).Check, (subscriberRemoveReq).Check, (tmpSubscriberSetReq).Check, (blacklistReq).Check, (channelReq).Check, (whitelistReq).Check；用于 该包实现 channel_model 相关逻辑。 |
| `internal/api/cluster.go` | 位于 internal/api 的模块实现。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 cluster 相关逻辑。 |
| `internal/api/conn.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 6 项，标准库 errors, fmt 等 3 项；导出: 无；关键函数/方法: (*connApi).route, (*connApi).remove, (*connApi).kick；用于 该包实现 conn 相关逻辑。 |
| `internal/api/connz.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 6 项；导出: Connz, ConnInfo, SortOpt, ByID, ByIDDesc, ByInMsg, ByInMsgDesc, ByOutMsg 等 29 项；关键函数/方法: (*connz).HandleConnz, (*Server).GetConnInfos, (byID).Less, (byID).Len, (byID).Swap, (byIDDesc).Less, (byIDDesc).Len, (byIDDesc).Swap 等 76 项；用于 该包实现 connz 相关逻辑。 |
| `internal/api/conversation.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options 等 7 项；导出: 无；关键函数/方法: (*conversation).route, (*conversation).clearConversationUnread, (*conversation).setConversationUnread, (*conversation).deleteConversation, (*conversation).syncUserConversation, (*conversation).getChannelLastMsgSeqMap 等 10 项；用于 该包实现 conversation 相关逻辑。 |
| `internal/api/conversation_model.go` | 位于 internal/api 的模型定义。导入/依赖: 外部 github.com/pkg/errors，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/types 等 4 项；导出: 无；关键函数/方法: (clearConversationUnreadReq).Check, (deleteChannelReq).Check；用于 该包实现 conversation_model 相关逻辑。 |
| `internal/api/docs.go` | 位于 internal/api 的包文档。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/pkg/wkhttp 等 3 项，标准库 encoding/json, net/http 等 4 项；导出: 无；关键函数/方法: (*docs).route, (*docs).redirectToDocs, (*docs).docsHealth, (*docs).disabledInRelease, (*docs).releaseHealthCheck, (*docs).swaggerUI, (*docs).openAPI, (*docs).generateSwaggerHTML；用于 提供包级文档与用法说明。 |
| `internal/api/event.go` | 位于 internal/api 的事件处理/事件定义。导入/依赖: 外部 github.com/pkg/errors, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 8 项；导出: 无；关键函数/方法: (*event).route, (*event).send, (*event).handleTextMessageStart, (*event).handleTextMessageContent, (*event).handleTextMessageEnd, (*event).sendStreamMessage, (*event).sendEvent；用于 该包实现 event 相关逻辑。 |
| `internal/api/event_model.go` | 位于 internal/api 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 event_model 相关逻辑。 |
| `internal/api/manager.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/gin-gonic/gin, github.com/golang-jwt/jwt/v5 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/pkg/wkhttp 等 3 项，标准库 errors, net/http 等 4 项；导出: 无；关键函数/方法: (*manager).route, (*manager).login；用于 该包实现 manager 相关逻辑。 |
| `internal/api/message.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/gin-gonic/gin, github.com/pkg/errors 等 4 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 13 项；导出: 无；关键函数/方法: (*message).route, (*message).send, (*message).requestSetSubscribersForTmpChannel, (*message).sendBatch, (*message).sync, (*message).syncack, (*message).searchMessages, (*message).searchMessage 等 17 项；用于 该包实现 message 相关逻辑。 |
| `internal/api/message_model.go` | 位于 internal/api 的模型定义。导入/依赖: 外部 github.com/pkg/errors，内部 github.com/WuKongIM/WuKongIM/internal/types，标准库 strings；导出: 无；关键函数/方法: (messageSendReq).Check, (syncReq).Check, (syncackReq).Check；用于 该包实现 message_model 相关逻辑。 |
| `internal/api/request.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/sendgrid/rest 等 2 项，内部 github.com/WuKongIM/WuKongIM/internal/options 等 7 项；导出: 无；关键函数/方法: (*request).enrichStreamMessages, (*request).getRecentMessagesForCluster, (*request).requestSyncMessage, (*request).getRecentMessages, (*request).groupChannelsByDbShard, (*request).processBatchChannels, (*request).loadMessagesBatch 等 8 项；用于 该包实现 request 相关逻辑。 |
| `internal/api/route.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/gin-gonic/gin, github.com/pkg/errors 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/pkg/wkhttp 等 4 项，标准库 net/http；导出: 无；关键函数/方法: (*route).route, (*route).routeUserIMAddr, (*route).routeUserIMAddrOfBatch；用于 该包实现 route 相关逻辑。 |
| `internal/api/server.go` | 位于 internal/api 的服务端实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel，内部 github.com/WuKongIM/WuKongIM/internal/ingress, github.com/WuKongIM/WuKongIM/internal/options 等 3 项，标准库 strings, time；导出: Server, New；关键函数/方法: New, (*Server).Start, (*Server).Stop, (*Server).Schedule, (*everyScheduler).Next；用于 该包实现 server 相关逻辑。 |
| `internal/api/server_http.go` | 位于 internal/api 的服务端实现。导入/依赖: 外部 github.com/gin-contrib/pprof, github.com/gin-gonic/gin 等 4 项，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/plugin 等 7 项，标准库 net/http, strings；导出: 无；关键函数/方法: (*bodyLogWriter).Write, (*apiServer).start, (*apiServer).stop, (*apiServer).setRoutes, (*apiServer).jwtAndTokenAuthSetMiddleware；用于 该包实现 server_http 相关逻辑。 |
| `internal/api/server_manager.go` | 位于 internal/api 的服务端实现。导入/依赖: 外部 github.com/gin-contrib/gzip, github.com/gin-gonic/gin 等 4 项，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/plugin 等 8 项，标准库 fmt, io/fs 等 5 项；导出: 无；关键函数/方法: (*managerServer).start, (*managerServer).stop, (*managerServer).setRoutes, (*managerServer).jwtAndTokenAuthMiddleware；用于 该包实现 server_manager 相关逻辑。 |
| `internal/api/stream.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/gin-gonic/gin, github.com/pkg/errors 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 9 项，标准库 context, fmt 等 5 项；导出: 无；关键函数/方法: (*stream).route, (*stream).open, (*stream).close；用于 该包实现 stream 相关逻辑。 |
| `internal/api/stress.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/pkg/errors, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/service 等 7 项，标准库 context, fmt 等 6 项；导出: 无；关键函数/方法: (*stress).route, (*stress).add, (*stress).remove, (*stress).infoList, (*stress).start, (*stress).stop, (*stress).report, (*stress).templates 等 13 项；用于 该包实现 stress 相关逻辑。 |
| `internal/api/tag.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/service 等 6 项，标准库 errors, fmt 等 5 项；导出: 无；关键函数/方法: (*tag).route, (*tag).get, (*tag).remove, (*tag).list；用于 该包实现 tag 相关逻辑。 |
| `internal/api/task_migrate.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil 等 4 项，内部 github.com/WuKongIM/WuKongIM/internal/options 等 8 项；导出: MigrateTask, MigrateResult, NewMigrateTask；关键函数/方法: NewMigrateTask, (*MigrateTask).Run, (*MigrateTask).IsMigrated, (*MigrateTask).Migrated, (*MigrateTask).GetMigrateResult, (*MigrateTask).run, (*MigrateTask).stepMessageImport 等 20 项；用于 该包实现 task_migrate 相关逻辑。 |
| `internal/api/user.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 github.com/pkg/errors, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 10 项；导出: UpdateTokenReq, OnlinestatusResp；关键函数/方法: (UpdateTokenReq).Check, (*user).route, (*user).deviceQuit, (*user).quitUserDevice, (*user).getOnlineStatus, (*user).getOnlineConnsForCluster, (*user).requestOnlineStatus, (*user).getOnlineConns 等 17 项；用于 该包实现 user 相关逻辑。 |
| `internal/api/varz.go` | 位于 internal/api 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 9 项，标准库 fmt, net/http 等 5 项；导出: Varz, SystemSetting, CreateVarz；关键函数/方法: CreateVarz, (*varz).HandleVarz, (*varz).Settings, (*varz).route；用于 该包实现 varz 相关逻辑。 |
| `internal/channel/event/eventlist.go` | 位于 internal/channel/event 的事件处理/事件定义。导入/依赖: 标准库 sync；导出: 无；关键函数/方法: (*linkedList).push, (*linkedList).remove, (*linkedList).get, (*linkedList).readHandlers；用于 该包实现 eventlist 相关逻辑。 |
| `internal/channel/event/handler.go` | 位于 internal/channel/event 的处理器实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 6 项；导出: 无；关键函数/方法: (*channelHandler).addEvent, (*channelHandler).hasEvent, (*channelHandler).events, (*channelHandler).advanceEvents, (*channelHandler).checkAndUpdateLeaderIdChange, (*channelHandler).isTimeout, (*channelHandler).groupByType；用于 该包实现 handler 相关逻辑。 |
| `internal/channel/event/poller.go` | 位于 internal/channel/event 的事件处理/事件定义。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/panjf2000/ants/v2 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 3 项；导出: 无；关键函数/方法: (*poller).start, (*poller).stop, (*poller).addEvent, (*poller).loopEvent, (*poller).tick, (*poller).clear, (*poller).handleEvents, (*poller).advance 等 11 项；用于 该包实现 poller 相关逻辑。 |
| `internal/channel/event/pool.go` | 位于 internal/channel/event 的事件处理/事件定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 3 项，标准库 hash/fnv；导出: EventPool, NewEventPool；关键函数/方法: NewEventPool, (*EventPool).Start, (*EventPool).Stop, (*EventPool).AddEvent, (*EventPool).Advance, (*EventPool).pollerByChannel；用于 该包实现 pool 相关逻辑。 |
| `internal/channel/handler/base.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/common, github.com/WuKongIM/WuKongIM/internal/eventbus 等 7 项；导出: Handler, NewHandler；关键函数/方法: NewHandler, (*Handler).OnMessage, (*Handler).OnEvent, (*Handler).WithTimeout, (*Handler).routes, (*Handler).notForwardToLeader, (*Handler).forwardsToNode, (*Handler).sendToNode 等 9 项；用于 该包实现 base 相关逻辑。 |
| `internal/channel/handler/event_conversation.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/service；导出: 无；关键函数/方法: (*Handler).conversation；用于 该包实现 event_conversation 相关逻辑。 |
| `internal/channel/handler/event_distribute.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 8 项；导出: 无；关键函数/方法: (*Handler).distribute, (*Handler).distributeCommon, (*Handler).distributeOnlineCmd, (*Handler).groupEventsByTagKey, (*Handler).distributeByTag, (*Handler).isSkipConversationUpdate, (*Handler).distributeToNode 等 14 项；用于 该包实现 event_distribute 相关逻辑。 |
| `internal/channel/handler/event_onsend.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/track；导出: 无；关键函数/方法: (*Handler).onSend；用于 该包实现 event_onsend 相关逻辑。 |
| `internal/channel/handler/event_onstream.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/service 等 4 项；导出: 无；关键函数/方法: (*Handler).onStream, (*Handler).persistStreams, (*Handler).toPersistStreams；用于 该包实现 event_onstream 相关逻辑。 |
| `internal/channel/handler/event_permission.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/service 等 4 项；导出: 无；关键函数/方法: (*Handler).permission；用于 该包实现 event_permission 相关逻辑。 |
| `internal/channel/handler/event_persist.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 8 项，标准库 strings, time；导出: 无；关键函数/方法: (*Handler).persist, (*Handler).pluginInvokePersistAfter, (*Handler).executePluginPersistAfterLocal, (*Handler).forwardPersistAfterToLeader, (*Handler).toPersistMessages；用于 该包实现 event_persist 相关逻辑。 |
| `internal/channel/handler/event_sendack.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: 无；关键函数/方法: (*Handler).sendack；用于 该包实现 event_sendack 相关逻辑。 |
| `internal/channel/handler/event_webhook.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 4 项；导出: 无；关键函数/方法: (*Handler).webhook；用于 该包实现 event_webhook 相关逻辑。 |
| `internal/channel/handler/proto.go` | 位于 internal/channel/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIMGoProto；导出: 无；关键函数/方法: (*forwardChannelEventReq).encode, (*forwardChannelEventReq).decode；用于 该包实现 proto 相关逻辑。 |
| `internal/common/common.go` | 位于 internal/common 的模块实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel 等 2 项，内部 github.com/WuKongIM/WuKongIM/internal/errors 等 11 项；导出: Service, NewService, CheckConnValidAndGetRealConn；关键函数/方法: NewService, CheckConnValidAndGetRealConn, (*Service).Start, (*Service).Stop, (*Service).Schedule, (*Service).AfterFunc, (*everyScheduler).Next, (*Service).GetOrRequestAndMakeTag 等 11 项；用于 该包实现 common 相关逻辑。 |
| `internal/errors/tag.go` | 位于 internal/errors 的类型/常量定义。导入/依赖: 标准库 errors；导出: TagNotExist, TagSlotLeaderIsZero, TagKeyEmpty, ChannelNotExist；关键函数/方法: 无；用于 该包实现 tag 相关逻辑。 |
| `internal/eventbus/channel.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: IChannel, RegisterChannel, Channel；关键函数/方法: RegisterChannel, (*channelPlus).AddEvent, (*channelPlus).AddEvents, (*channelPlus).Advance, (*channelPlus).SendMessage；用于 该包实现 channel 相关逻辑。 |
| `internal/eventbus/conn.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkutil, github.com/WuKongIM/WuKongIMGoProto，标准库 fmt, sync/atomic；导出: ConnStats, Conn；关键函数/方法: (*Conn).Encode, (*Conn).Decode, (*Conn).Size, (*Conn).Equal, (*Conn).String；用于 该包实现 conn 相关逻辑。 |
| `internal/eventbus/context.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: UserContext, UserHandlerFunc, ChannelContext, ChannelHandlerFunc, PushContext, PusherHandlerFunc；关键函数/方法: (*UserContext).Reset, (*ChannelContext).Reset, (*PushContext).Reset；用于 该包实现 context 相关逻辑。 |
| `internal/eventbus/event.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/track 等 2 项；导出: EventType, Event, EventBatch, UserEventHandler, ChannelEventHandler, PushEventHandler, EventMsgRange, EventUnknown 等 27 项；关键函数/方法: (EventType).String, (EventType).Uint8, (*Event).Clone, (*Event).Size, (EventBatch).Encode, (*EventBatch).Decode, (Event).encodeWithEcoder 等 13 项；用于 该包实现 event 相关逻辑。 |
| `internal/eventbus/event_queue.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt；导出: EventQueue, NewEventQueue；关键函数/方法: NewEventQueue, (*EventQueue).Append, (*EventQueue).Len, (*EventQueue).Slice, (*EventQueue).SliceWithSize, (*EventQueue).TruncateTo, (*EventQueue).LastIndex, (*EventQueue).getArrayIndex 等 10 项；用于 该包实现 event_queue 相关逻辑。 |
| `internal/eventbus/eventbus.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIMGoProto；导出: RegisterUserHandlers, RegisterChannelHandlers, RegisterPusherHandlers, ExecuteUserEvent, ExecuteChannelEvent, ExecutePusherEvent, Proto；关键函数/方法: RegisterUserHandlers, RegisterChannelHandlers, RegisterPusherHandlers, ExecuteUserEvent, ExecuteChannelEvent, ExecutePusherEvent；用于 该包实现 eventbus 相关逻辑。 |
| `internal/eventbus/pusher.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: IPusher, RegisterPusher, Pusher；关键函数/方法: RegisterPusher, (*pusherPlus).AddEvents, (*pusherPlus).Advance；用于 该包实现 pusher 相关逻辑。 |
| `internal/eventbus/user.go` | 位于 internal/eventbus 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIMGoProto；导出: IUser, RegisterUser, User；关键函数/方法: RegisterUser, (*userPlus).AddEvent, (*userPlus).AddEvents, (*userPlus).Advance, (*userPlus).Connect, (*userPlus).ConnsByDeviceFlag, (*userPlus).ConnCountByDeviceFlag, (*userPlus).ConnsByUid 等 23 项；用于 该包实现 user 相关逻辑。 |
| `internal/ingress/client.go` | 位于 internal/ingress 的客户端实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/service, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项；导出: Client, NewClient；关键函数/方法: NewClient, (*Client).RequestTag, (*Client).UpdateTag, (*Client).AddTag, (*Client).RequestAllowSendForPerson, (*Client).RequestSubscribers, (*Client).RequestStreams, (*Client).RequestStreamsV2 等 11 项；用于 该包实现 client 相关逻辑。 |
| `internal/ingress/model.go` | 位于 internal/ingress 的模型定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb 等 3 项；导出: TagReq, TagResp, AllowSendReq, TagUpdateReq, TagAddReq, ChannelReq, SubscribersResp, StreamReq 等 13 项；关键函数/方法: (*TagUpdateReq).Encode, (*TagUpdateReq).Decode, (*TagAddReq).Encode, (*TagAddReq).Decode, (*ChannelReq).Encode, (*ChannelReq).Decode, (*SubscribersResp).Encode 等 24 项；用于 该包实现 model 相关逻辑。 |
| `internal/ingress/server.go` | 位于 internal/ingress 的服务端实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options 等 9 项；导出: Ingress, New；关键函数/方法: New, (*Ingress).SetRoutes, (*Ingress).handlePersistAfter, (*Ingress).executePluginPersistAfter, (*Ingress).handleGetTag, (*Ingress).handleAllowSend, (*Ingress).handleUpdateTag, (*Ingress).handleAddTag 等 11 项；用于 该包实现 server 相关逻辑。 |
| `internal/manager/bucket.go` | 位于 internal/manager 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/valyala/fastrand 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/types 等 3 项；导出: 无；关键函数/方法: (*tagBlucket).start, (*tagBlucket).stop, (*tagBlucket).loop, (*tagBlucket).checkExpireTags, (*tagBlucket).setTag, (*tagBlucket).getTag, (*tagBlucket).removeTag, (*tagBlucket).existTag 等 13 项；用于 该包实现 bucket 相关逻辑。 |
| `internal/manager/in_flight_pqueue.go` | 位于 internal/manager 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/types；导出: 无；关键函数/方法: (inFlightPqueue).Swap, (*inFlightPqueue).Push, (*inFlightPqueue).Pop, (*inFlightPqueue).Remove, (*inFlightPqueue).PeekAndShift, (*inFlightPqueue).up, (*inFlightPqueue).down；用于 该包实现 in_flight_pqueue 相关逻辑。 |
| `internal/manager/manager_conn.go` | 位于 internal/manager 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wknet，标准库 sync；导出: ConnManager, NewConnManager；关键函数/方法: NewConnManager, (*ConnManager).AddConn, (*ConnManager).RemoveConn, (*ConnManager).GetConn, (*ConnManager).GetConnByFd, (*ConnManager).ConnCount, (*ConnManager).GetAllConn, (*ConnManager).blucket 等 12 项；用于 该包实现 manager_conn 相关逻辑。 |
| `internal/manager/manager_conversation.go` | 位于 internal/manager 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil 等 2 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 9 项；导出: ConversationManager, NewConversationManager；关键函数/方法: NewConversationManager, (*ConversationManager).Push, (*ConversationManager).Start, (*ConversationManager).Stop, (*ConversationManager).DeleteFromCache 等 18 项；用于 该包实现 manager_conversation 相关逻辑。 |
| `internal/manager/manager_retry.go` | 位于 internal/manager 的模块实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel 等 2 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 5 项；导出: RetryManager, NewRetryManager；关键函数/方法: NewRetryManager, (*RetryManager).Start, (*RetryManager).Stop, (*RetryManager).RetryMessageCount, (*RetryManager).AddRetry, (*RetryManager).RemoveRetry, (*RetryManager).RetryMessage 等 10 项；用于 该包实现 manager_retry 相关逻辑。 |
| `internal/manager/manager_systemaccount.go` | 位于 internal/manager 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options 等 6 项；导出: SystemAccountManager, NewSystemAccountManager；关键函数/方法: NewSystemAccountManager, (*SystemAccountManager).LoadIfNeed, (*SystemAccountManager).IsSystemAccount, (*SystemAccountManager).AddSystemUids, (*SystemAccountManager).AddSystemUidsToCache 等 11 项；用于 该包实现 manager_systemaccount 相关逻辑。 |
| `internal/manager/manager_tag.go` | 位于 internal/manager 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/errors 等 6 项；导出: TagManager, NewTagManager；关键函数/方法: NewTagManager, (*TagManager).Start, (*TagManager).Stop, (*TagManager).MakeTag, (*TagManager).MakeTagWithTagKey, (*TagManager).MakeTagNotCacheWithTagKey, (*TagManager).AddUsers, (*TagManager).RemoveUsers 等 27 项；用于 该包实现 manager_tag 相关逻辑。 |
| `internal/manager/retry_queue.go` | 位于 internal/manager 的模块实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel 等 4 项，内部 github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: RetryQueue, NewRetryQueue；关键函数/方法: NewRetryQueue, (*RetryQueue).Start, (*RetryQueue).Stop, (*RetryQueue).startInFlightTimeout, (*RetryQueue).addToInFlightPQ, (*RetryQueue).pushInFlightMessage, (*RetryQueue).popInFlightMessage 等 13 项；用于 该包实现 retry_queue 相关逻辑。 |
| `internal/options/common.go` | 位于 internal/options 的配置/选项定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 2 项；导出: GetFakeChannelIDWith, GetFromUIDAndToUIDWith, GetAgentChannelIDWith, GetUidAndAgentUIDWith, GetCommunityTopicParentChannelID, IsSpecialChar；关键函数/方法: GetFakeChannelIDWith, GetFromUIDAndToUIDWith, GetAgentChannelIDWith, GetUidAndAgentUIDWith 等 6 项；用于 该包实现 common 相关逻辑。 |
| `internal/options/options.go` | 位于 internal/options 的配置/选项定义。导入/依赖: 外部 github.com/WuKongIM/crypto/tls, github.com/bwmarrin/snowflake 等 10 项，内部 github.com/WuKongIM/WuKongIM/pkg/auth 等 6 项；导出: Mode, Role, Options, MigrateStep, Node, Option, New, GetHomeDir 等 105 项；关键函数/方法: New, GetHomeDir, GetExternalIP, WithMode, WithHTTPAddr, WithAddr, WithRootDir, WithDataDir 等 124 项；用于 该包实现 options 相关逻辑。 |
| `internal/plugin/api.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/gin-gonic/gin 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/options 等 11 项；导出: 无；关键函数/方法: (*Server).SetRoute, (*Server).handleGetPlugins, (*Server).handlePluginRoute, (*Server).handleUpdatePluginConfig, (*Server).handlePluginBind, (*Server).handlePluginUnbind, (*Server).handlePluginBindList, (*Server).forwardSearchPluginUsers 等 10 项；用于 该包实现 api 相关逻辑。 |
| `internal/plugin/model.go` | 位于 internal/plugin 的模型定义。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2，内部 github.com/WuKongIM/WuKongIM/internal/types, github.com/WuKongIM/WuKongIM/internal/types/pluginproto 等 5 项；导出: BindJSON；关键函数/方法: BindJSON, (*userPluginBucket).add, (*userPluginBucket).get, (*userPluginBucket).remove, (*userPluginBucket).isAi, (*userPluginBucket).setIsAi, (*userPluginBucket).removeIsAi；用于 该包实现 model 相关逻辑。 |
| `internal/plugin/options.go` | 位于 internal/plugin 的配置/选项定义。导入/依赖: 标准库 os, path；导出: Options, Option, NewOptions, WithDir, WithSocketPath, WithInstall；关键函数/方法: NewOptions, WithDir, WithSocketPath, WithInstall；用于 该包实现 options 相关逻辑。 |
| `internal/plugin/plugin.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/WuKongIM/wkrpc/proto, github.com/panjf2000/gnet/v2，内部 github.com/WuKongIM/WuKongIM/internal/types 等 2 项；导出: Plugin；关键函数/方法: (*Plugin).GetNo, (*Plugin).Send, (*Plugin).PersistAfter, (*Plugin).Receive, (*Plugin).Route, (*Plugin).UpdateConfig, (*Plugin).NotifyConfigUpdate, (*Plugin).Stop 等 14 项；用于 该包实现 plugin 相关逻辑。 |
| `internal/plugin/plugin_manager.go` | 位于 internal/plugin 的模块实现。导入/依赖: 标准库 sort, sync；导出: 无；关键函数/方法: (*pluginManager).add, (*pluginManager).remove, (*pluginManager).get, (*pluginManager).getByName, (*pluginManager).all；用于 该包实现 plugin_manager 相关逻辑。 |
| `internal/plugin/rpc.go` | 位于 internal/plugin 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: 无；关键函数/方法: (*rpc).routes；用于 该包实现 rpc 相关逻辑。 |
| `internal/plugin/rpc_cluster.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/WuKongIM/wkrpc, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/service, github.com/WuKongIM/WuKongIM/internal/types/pluginproto，标准库 errors；导出: 无；关键函数/方法: (*rpc).clusterConfig, (*rpc).clusterChannelBelongNode；用于 该包实现 rpc_cluster 相关逻辑。 |
| `internal/plugin/rpc_conversation.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/WuKongIM/wkrpc, github.com/sendgrid/rest 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/service, github.com/WuKongIM/WuKongIM/internal/types/pluginproto 等 4 项，标准库 encoding/json, fmt；导出: 无；关键函数/方法: (*rpc).conversationChannels, (*rpc).post；用于 该包实现 rpc_conversation 相关逻辑。 |
| `internal/plugin/rpc_message.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/WuKongIM/wkrpc, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 7 项，标准库 errors, fmt 等 4 项；导出: 无；关键函数/方法: (*rpc).messageSend, (*rpc).channelMessages；用于 该包实现 rpc_message 相关逻辑。 |
| `internal/plugin/rpc_plugin.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/WuKongIM/wkrpc, github.com/sendgrid/rest 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/service 等 6 项，标准库 bytes, context 等 9 项；导出: AllNode；关键函数/方法: (*rpc).ForwardWithBody, (*rpc).pluginStart, (*rpc).pluginChange, (*rpc).pluginClose, (*rpc).pluginHttpForward；用于 该包实现 rpc_plugin 相关逻辑。 |
| `internal/plugin/rpc_stream.go` | 位于 internal/plugin 的模块实现。导入/依赖: 外部 github.com/WuKongIM/wkrpc, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options, github.com/WuKongIM/WuKongIM/internal/service 等 5 项，标准库 encoding/json, errors 等 3 项；导出: 无；关键函数/方法: (*rpc).streamOpen, (*rpc).streamClose, (*rpc).streamWrite, (*rpc).requestStreamOpen, (*rpc).requestStreamClose, (*rpc).requestStreamWrite；用于 该包实现 rpc_stream 相关逻辑。 |
| `internal/plugin/server.go` | 位于 internal/plugin 的服务端实现。导入/依赖: 外部 github.com/fsnotify/fsnotify, github.com/WuKongIM/wkrpc 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/service 等 4 项；导出: Server, NewServer；关键函数/方法: NewServer, (*Server).Start, (*Server).Stop, (*Server).Plugins, (*Server).Plugin, (*Server).UserIsAI, (*Server).GetUserPluginNo, (*Server).UninstallPlugin 等 26 项；用于 该包实现 server 相关逻辑。 |
| `internal/pusher/event/handler.go` | 位于 internal/pusher/event 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 3 项，标准库 fmt, sync；导出: 无；关键函数/方法: (*pushHandler).addEvent, (*pushHandler).hasEvent, (*pushHandler).events, (*pushHandler).advanceEvents, (*pushHandler).groupByType；用于 该包实现 handler 相关逻辑。 |
| `internal/pusher/event/poller.go` | 位于 internal/pusher/event 的事件处理/事件定义。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/panjf2000/ants/v2 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: 无；关键函数/方法: (*poller).start, (*poller).stop, (*poller).loopEvent, (*poller).handleEvents, (*poller).advance, (*poller).getContext, (*poller).putContext；用于 该包实现 poller 相关逻辑。 |
| `internal/pusher/event/pool.go` | 位于 internal/pusher/event 的事件处理/事件定义。导入/依赖: 外部 github.com/valyala/fastrand, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: EventPool, NewEventPool；关键函数/方法: NewEventPool, (*EventPool).Start, (*EventPool).Stop, (*EventPool).RandHandlerId, (*EventPool).AddEvent, (*EventPool).Advance, (*EventPool).handlerById；用于 该包实现 pool 相关逻辑。 |
| `internal/pusher/handler/base.go` | 位于 internal/pusher/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/pkg/wklog 等 3 项；导出: Handler, NewHandler；关键函数/方法: NewHandler, (*Handler).OnMessage, (*Handler).OnEvent, (*Handler).routes；用于 该包实现 base 相关逻辑。 |
| `internal/pusher/handler/event_pushoffline.go` | 位于 internal/pusher/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: 无；关键函数/方法: (*Handler).pushOffline；用于 该包实现 event_pushoffline 相关逻辑。 |
| `internal/pusher/handler/event_pushonline.go` | 位于 internal/pusher/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 9 项；导出: 无；关键函数/方法: (*Handler).pushOnline, (*Handler).processChannelPush, (*Handler).shouldProcessEvent, (*Handler).getDisplayFromUid, (*Handler).pushMessageToConnections, (*Handler).pushEventToConnections, (*Handler).shouldSkipConnection 等 18 项；用于 该包实现 event_pushonline 相关逻辑。 |
| `internal/server/common.go` | 位于 internal/server 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 2 项；导出: ClusterMsgType, ChannelActionType, UserActionType, StreamActionType, Reason, GetFakeChannelIDWith, GetFromUIDAndToUIDWith, GetCommunityTopicParentChannelID 等 64 项；关键函数/方法: GetFakeChannelIDWith, GetFromUIDAndToUIDWith, GetCommunityTopicParentChannelID 等 5 项；用于 该包实现 common 相关逻辑。 |
| `internal/server/datasource.go` | 位于 internal/server 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/network 等 3 项；导出: IDatasource, Datasource, NewDatasource；关键函数/方法: NewDatasource, (*Datasource).GetChannelInfo, (*Datasource).GetSubscribers, (*Datasource).GetBlacklist, (*Datasource).GetWhitelist, (*Datasource).GetSystemUIDs, (*Datasource).requestCMD, (channelInfoResp).toChannelInfo；用于 该包实现 datasource 相关逻辑。 |
| `internal/server/proto.go` | 位于 internal/server 的模块实现。导入/依赖: 外部 github.com/pkg/errors, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 7 项，标准库 bytes, encoding/json 等 6 项；导出: 无；关键函数/方法: (*Server).onData, (*Server).handleAuthenticatedConn, (*Server).handleUnauthenticatedConn；用于 该包实现 proto 相关逻辑。 |
| `internal/server/proxyproto.go` | 位于 internal/server 的模块实现。导入/依赖: 外部 github.com/pkg/errors，内部 github.com/WuKongIM/WuKongIMGoProto；导出: AddressFamilyAndProtocol, UNSPEC, TCPv4, UDPv4, TCPv6, UDPv6, UnixStream, UnixDatagram 等 19 项；关键函数/方法: (AddressFamilyAndProtocol).IsIPv4, (AddressFamilyAndProtocol).IsIPv6, (AddressFamilyAndProtocol).IsUnix, (AddressFamilyAndProtocol).IsStream 等 6 项；用于 该包实现 proxyproto 相关逻辑。 |
| `internal/server/server.go` | 位于 internal/server 的服务端实现。导入/依赖: 外部 github.com/fatih/color, github.com/gin-gonic/gin 等 4 项，内部 github.com/WuKongIM/WuKongIM/internal/api 等 26 项；导出: Server, New；关键函数/方法: New, (*Server).Init, (*Server).Start, (*Server).StopNoErr, (*Server).Stop, (*Server).MustWaitClusterReady, (*Server).MustWaitAllSlotsReady, (*Server).GetClusterConfig 等 20 项；用于 该包实现 server 相关逻辑。 |
| `internal/server/server_cluster.go` | 位于 internal/server 的服务端实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/pkg/wkserver/proto；导出: 无；关键函数/方法: (*Server).handleClusterMessage；用于 该包实现 server_cluster 相关逻辑。 |
| `internal/server/server_demo.go` | 位于 internal/server 的服务端实现。导入/依赖: 外部 github.com/gin-contrib/gzip, github.com/gin-gonic/gin 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkhttp, github.com/WuKongIM/WuKongIM/pkg/wklog 等 3 项，标准库 fmt, io/fs 等 4 项；导出: DemoServer, NewDemoServer；关键函数/方法: NewDemoServer, (*DemoServer).Start, (*DemoServer).Stop, (*DemoServer).setRoutes；用于 该包实现 server_demo 相关逻辑。 |
| `internal/server/testutil.go` | 位于 internal/server 的模块实现。导入/依赖: 外部 github.com/spf13/viper 等 2 项，内部 github.com/WuKongIM/WuKongIM/internal/options 等 3 项；导出: NewTestServer, NewTestClusterServerTwoNode, NewTestClusterServerTreeNode, MustWaitClusterReady, TestStartServer, GetLeaderServer, TestCreateClient；关键函数/方法: NewTestServer, NewTestClusterServerTwoNode, NewTestClusterServerTreeNode 等 8 项；用于 该包实现 testutil 相关逻辑。 |
| `internal/service/cache.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkcache；导出: StreamCache；关键函数/方法: 无；用于 该包实现 cache 相关逻辑。 |
| `internal/service/cluster.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/icluster；导出: Cluster；关键函数/方法: 无；用于 该包实现 cluster 相关逻辑。 |
| `internal/service/common.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 外部 github.com/RussellLuo/timingwheel，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb，标准库 time；导出: ICommonService, CommonService；关键函数/方法: 无；用于 该包实现 common 相关逻辑。 |
| `internal/service/manager_conn.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wknet；导出: IConnManager, ConnManager；关键函数/方法: 无；用于 该包实现 manager_conn 相关逻辑。 |
| `internal/service/manager_conversation.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 3 项；导出: IConversationManager, ConversationManager；关键函数/方法: 无；用于 该包实现 manager_conversation 相关逻辑。 |
| `internal/service/manager_plugin.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/types；导出: IPluginManager, PluginManager；关键函数/方法: 无；用于 该包实现 manager_plugin 相关逻辑。 |
| `internal/service/manager_retry.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/types；导出: RetryMgr, RetryManager；关键函数/方法: 无；用于 该包实现 manager_retry 相关逻辑。 |
| `internal/service/manager_systemaccount.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 无（无 import）；导出: ISystemAccountMgr, SystemAccountManager；关键函数/方法: 无；用于 该包实现 manager_systemaccount 相关逻辑。 |
| `internal/service/manager_tag.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/types；导出: ITagManager, TagManager；关键函数/方法: 无；用于 该包实现 manager_tag 相关逻辑。 |
| `internal/service/permission.go` | 位于 internal/service 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/options 等 4 项；导出: RPCClient, PermissionService, SenderInfo, NewPermissionService, Permission；关键函数/方法: NewPermissionService, (*PermissionService).IsPublicChannelType, (*PermissionService).HasPermissionForChannel, (*PermissionService).HasPermissionForSender 等 10 项；用于 该包实现 permission 相关逻辑。 |
| `internal/service/store.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/store；导出: Store；关键函数/方法: 无；用于 该包实现 store 相关逻辑。 |
| `internal/service/webhook.go` | 位于 internal/service 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/types 等 4 项；导出: IWebhook, Webhook；关键函数/方法: 无；用于 该包实现 webhook 相关逻辑。 |
| `internal/track/track.go` | 位于 internal/track 的模块实现。导入/依赖: 标准库 bytes, encoding/binary 等 4 项；导出: Position, Message, PositionUnknown, PositionStart, PositionUserOnSend, PositionNodeOnSend, PositionChannelOnSend, PositionChannelPermission 等 18 项；关键函数/方法: (Position).String, (*Message).Record, (*Message).Size, (*Message).HasData, (*Message).Clone, (*Message).Encode, (*Message).Decode, (*Message).String；用于 该包实现 track 相关逻辑。 |
| `internal/types/event_api.go` | 位于 internal/types 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: AGUIEvent, AGUIEventTextMessageStart, AGUIEventTextMessageContent, AGUIEventTextMessageEnd, AGUIEventToolCallStart, AGUIEventToolCallArgs, AGUIEventToolCallEnd, AGUIEventToolCallResult；关键函数/方法: (AGUIEvent).String；用于 该包实现 event_api 相关逻辑。 |
| `internal/types/message.go` | 位于 internal/types 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb, github.com/WuKongIM/WuKongIM/pkg/wkutil 等 3 项，标准库 strconv, strings；导出: MessageResp, MessageHeader, MessageRespSlice, RetryMessage, StreamItemResp, NewStreamItemResp；关键函数/方法: NewStreamItemResp, (*MessageResp).From, (MessageRespSlice).Len, (MessageRespSlice).Swap, (MessageRespSlice).Less；用于 该包实现 message 相关逻辑。 |
| `internal/types/plugin.go` | 位于 internal/types 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/types/pluginproto, github.com/WuKongIM/WuKongIMGoProto，标准库 context；导出: PluginStatus, Plugin, PluginMethod, PluginMethodType, PluginResponse, PluginStatusInit, PluginStatusNormal, PluginStatusError 等 20 项；关键函数/方法: (PluginStatus).String, (PluginMethod).String, (PluginMethod).Type；用于 该包实现 plugin 相关逻辑。 |
| `internal/types/pluginproto/plugin.go` | 位于 internal/types/pluginproto 的模块实现。导入/依赖: 外部 google.golang.org/protobuf/proto；导出: FieldType, FieldTypeString, FieldTypeNumber, FieldTypeBool, FieldTypeSecret；关键函数/方法: (FieldType).String, (*PluginInfo).Marshal, (*PluginInfo).Unmarshal, (*SendPacket).Marshal, (*SendPacket).Unmarshal, (*Message).Marshal, (*Message).Unmarshal, (*MessageBatch).Marshal 等 55 项；用于 该包实现 plugin 相关逻辑。 |
| `internal/types/pluginproto/plugin.pb.go` | 位于 internal/types/pluginproto 的模块实现。导入/依赖: 外部 google.golang.org/protobuf/reflect/protoreflect 等 2 项；导出: PluginInfo, Field, ConfigTemplate, StartupResp, Conn, SendPacket, RecvPacket, Message 等 34 项；关键函数/方法: (*PluginInfo).Reset, (*PluginInfo).String, (*PluginInfo).ProtoMessage, (*PluginInfo).ProtoReflect, (*PluginInfo).Descriptor, (*PluginInfo).GetNo 等 280 项；用于 该包实现 plugin.pb 相关逻辑。 |
| `internal/types/pluginproto/plugin.proto` | 位于 internal/types/pluginproto 的Protobuf 协议定义。导入/依赖: 无（无 import）；导出: PluginInfo, Field, ConfigTemplate, StartupResp, Conn, SendPacket, RecvPacket, Message 等 33 项；关键函数/方法: 无；用于 定义 pluginproto 包的消息结构与服务接口。 |
| `internal/types/tag.go` | 位于 internal/types 的模块实现。导入/依赖: 外部 go.uber.org/atomic，标准库 fmt, time；导出: Tag, Node；关键函数/方法: (*Tag).String, (*Node).String, (*Tag).GetNodeUsers, (*Tag).ExistUserInNode, (*Tag).GetUsers；用于 该包实现 tag 相关逻辑。 |
| `internal/types/webhook.go` | 位于 internal/types 的模块实现。导入/依赖: 标准库 fmt；导出: Event, MessageOfflineNotify, EventMsgOffline, EventMsgNotify, EventOnlineStatus, EventMsgStream；关键函数/方法: (*Event).String；用于 该包实现 webhook 相关逻辑。 |
| `internal/user/event/conns.go` | 位于 internal/user/event 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIMGoProto，标准库 sync；导出: 无；关键函数/方法: (*conns).add, (*conns).addOrUpdateConn, (*conns).remove, (*conns).removeConnByNodeId, (*conns).connByConnId, (*conns).updateConnAuth, (*conns).updateConn, (*conns).len 等 17 项；用于 该包实现 conns 相关逻辑。 |
| `internal/user/event/eventlist.go` | 位于 internal/user/event 的事件处理/事件定义。导入/依赖: 标准库 sync；导出: 无；关键函数/方法: (*linkedList).push, (*linkedList).remove, (*linkedList).get, (*linkedList).count, (*linkedList).readHandlers；用于 该包实现 eventlist 相关逻辑。 |
| `internal/user/event/handler.go` | 位于 internal/user/event 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 6 项；导出: 无；关键函数/方法: (*userHandler).addEvent, (*userHandler).hasEvent, (*userHandler).events, (*userHandler).advanceEvents, (*userHandler).tick, (*userHandler).checkInvalidConn, (*userHandler).leaderId, (*userHandler).addConn 等 10 项；用于 该包实现 handler 相关逻辑。 |
| `internal/user/event/poller.go` | 位于 internal/user/event 的事件处理/事件定义。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/panjf2000/ants/v2 等 3 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 5 项；导出: 无；关键函数/方法: (*poller).start, (*poller).stop, (*poller).addEvent, (*poller).loopEvent, (*poller).tick, (*poller).handleEvents, (*poller).handler, (*poller).getContext 等 23 项；用于 该包实现 poller 相关逻辑。 |
| `internal/user/event/pool.go` | 位于 internal/user/event 的事件处理/事件定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/common 等 7 项；导出: EventPool, NewEventPool；关键函数/方法: NewEventPool, (*EventPool).Start, (*EventPool).Stop, (*EventPool).AddEvent, (*EventPool).Advance, (*EventPool).ConnsByUid, (*EventPool).AuthedConnsByUid, (*EventPool).ConnCountByUid 等 20 项；用于 该包实现 pool 相关逻辑。 |
| `internal/user/handler/base.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 6 项；导出: Handler, NewHandler；关键函数/方法: NewHandler, (*Handler).OnMessage, (*Handler).OnEvent, (*Handler).routes, (*Handler).totalIn, (*Handler).totalOut, (*Handler).notForwardToLeader, (*Handler).userLeaderNodeId 等 12 项；用于 该包实现 base 相关逻辑。 |
| `internal/user/handler/event_close.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/common, github.com/WuKongIM/WuKongIM/internal/eventbus 等 5 项；导出: 无；关键函数/方法: (*Handler).closeConn, (*Handler).removeConn, (*Handler).connLeaderRemove, (*Handler).notifyUserOfflineIfNeed；用于 该包实现 event_close 相关逻辑。 |
| `internal/user/handler/event_connack.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 4 项；导出: 无；关键函数/方法: (*Handler).connack；用于 该包实现 event_connack 相关逻辑。 |
| `internal/user/handler/event_connect.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 8 项，标准库 encoding/base64, errors 等 3 项；导出: 无；关键函数/方法: (*Handler).connect, (*Handler).handleConnect, (*Handler).getClientAesKeyAndIV；用于 该包实现 event_connect 相关逻辑。 |
| `internal/user/handler/event_onsend.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 github.com/valyala/bytebufferpool, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 9 项；导出: 无；关键函数/方法: (*Handler).onSend, (*Handler).handleOnSend, (*Handler).checkGlobalSendPermission, (*Handler).pluginInvokeSend, (*Handler).decryptPayload, (*Handler).sendPacketIsVail；用于 该包实现 event_onsend 相关逻辑。 |
| `internal/user/handler/event_ping.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/pkg/trace 等 3 项；导出: 无；关键函数/方法: (*Handler).ping；用于 该包实现 event_ping 相关逻辑。 |
| `internal/user/handler/event_recvack.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIM/internal/options 等 8 项；导出: 无；关键函数/方法: (*Handler).recvack；用于 该包实现 event_recvack 相关逻辑。 |
| `internal/user/handler/event_write.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/jsonrpc, github.com/WuKongIM/WuKongIM/internal/common 等 6 项；导出: 无；关键函数/方法: (*Handler).writeFrame, (*Handler).writeLocalFrame；用于 该包实现 event_write 相关逻辑。 |
| `internal/user/handler/proto.go` | 位于 internal/user/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/internal/eventbus, github.com/WuKongIM/WuKongIMGoProto；导出: 无；关键函数/方法: (*forwardUserEventReq).encode, (*forwardUserEventReq).decode；用于 该包实现 proto 相关逻辑。 |
| `internal/webhook/webhook.go` | 位于 internal/webhook 的模块实现。导入/依赖: 外部 github.com/nsqio/go-diskqueue, github.com/panjf2000/ants/v2 等 7 项，内部 github.com/WuKongIM/WuKongIM/internal/eventbus 等 10 项；导出: Webhook, New；关键函数/方法: New, (*Webhook).Start, (*Webhook).Stop, (*Webhook).Online, (*Webhook).Offline, (*Webhook).TriggerEvent, (*Webhook).NotifyOfflineMsg, (*Webhook).AppendMessageOfNotifyQueue 等 25 项；用于 该包实现 webhook 相关逻辑。 |
| `pkg/auth/auth.go` | 位于 pkg/auth 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/auth/resource 等 2 项；导出: Kind, Action, AuthConfig, UserConfig, PermissionConfig, PermissionConfigs, Actions, KindNone 等 13 项；关键函数/方法: (AuthConfig).Auth, (AuthConfig).HasPermission, (AuthConfig).HasPermissionWithContext, (AuthConfig).Persmissions, (PermissionConfigs).Format, (Actions).Format；用于 该包实现 auth 相关逻辑。 |
| `pkg/auth/errors.go` | 位于 pkg/auth 的类型/常量定义。导入/依赖: 标准库 fmt；导出: ErrAuthFailed；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/auth/resource/resource.go` | 位于 pkg/auth/resource 的类型/常量定义。导入/依赖: 无（无 import）；导出: Id, Slot, ClusterChannel, Plugin, PluginUser, All；关键函数/方法: 无；用于 该包实现 resource 相关逻辑。 |
| `pkg/bytequeue/queue.go` | 位于 pkg/bytequeue 的模块实现。导入/依赖: 外部 github.com/valyala/bytebufferpool；导出: ByteQueue, New；关键函数/方法: New, (*ByteQueue).Write, (*ByteQueue).Peek, (*ByteQueue).Discard, (*ByteQueue).Reset, (*ByteQueue).discard；用于 该包实现 queue 相关逻辑。 |
| `pkg/client/buffer.go` | 位于 pkg/client 的模块实现。导入/依赖: 标准库 bytes, fmt 等 6 项；导出: 无；关键函数/方法: (*timeoutWriter).Write, (*limReader).Read, (*limReader).ReadString, (*limWriter).appendString, (*limWriter).appendBufs, (*limWriter).writeDirect, (*limWriter).flush, (*limWriter).buffered 等 13 项；用于 该包实现 buffer 相关逻辑。 |
| `pkg/client/client.go` | 位于 pkg/client 的客户端实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkutil 等 3 项；导出: OnRecv, OnSendack, Client, Channel, New, NewChannel；关键函数/方法: New, NewChannel, (*Client).Connect, (*Client).SetOnRecv, (*Client).SetOnSendack, (*Client).Flush, (*Client).FlushTimeout, (*Client).LastSendMsgTime 等 40 项；用于 该包实现 client 相关逻辑。 |
| `pkg/client/common.go` | 位于 pkg/client 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIMGoProto；导出: 无；关键函数/方法: parse, gnetUnpacket, decodeLength；用于 该包实现 common 相关逻辑。 |
| `pkg/client/const.go` | 位于 pkg/client 的模块实现。导入/依赖: 外部 go.uber.org/atomic，标准库 errors；导出: Status, Statistics, DISCONNECTED, CONNECTED, CLOSED, RECONNECTING, CONNECTING, STALE_CONNECTION 等 13 项；关键函数/方法: (Status).String；用于 该包实现 const 相关逻辑。 |
| `pkg/client/options.go` | 位于 pkg/client 的配置/选项定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIMGoProto，标准库 time；导出: Options, Option, SendOptions, SendOption, NewOptions, WithProtoVersion, WithUID, WithToken 等 16 项；关键函数/方法: NewOptions, WithProtoVersion, WithUID, WithToken, WithAutoReconn, NewSendOptions, SendOptionWithNoPersist, SendOptionWithSyncOnce 等 12 项；用于 该包实现 options 相关逻辑。 |
| `pkg/client/timer.go` | 位于 pkg/client 的模块实现。导入/依赖: 标准库 sync, time；导出: 无；关键函数/方法: (*timerPool).Get, (*timerPool).Put；用于 该包实现 timer 相关逻辑。 |
| `pkg/cluster/channel/channel.go` | 位于 pkg/cluster/channel 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/raft, github.com/WuKongIM/WuKongIM/pkg/raft/raftgroup 等 6 项；导出: Channel；关键函数/方法: (*Channel).switchConfig, (*Channel).needUpdate；用于 该包实现 channel 相关逻辑。 |
| `pkg/cluster/channel/errors.go` | 位于 pkg/cluster/channel 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrNoAllowVoteNode, ErrNoLeader；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/cluster/channel/event_raftgroup.go` | 位于 pkg/cluster/channel 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/raftgroup, github.com/WuKongIM/WuKongIM/pkg/trace；导出: 无；关键函数/方法: (*Server).OnAddRaft, (*Server).OnRemoveRaft；用于 该包实现 event_raftgroup 相关逻辑。 |
| `pkg/cluster/channel/iserver.go` | 位于 pkg/cluster/channel 的服务端实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/trace 等 4 项，标准库 context, fmt 等 3 项；导出: 无；关键函数/方法: (*Server).ProposeBatchUntilAppliedTimeout, (*Server).ProposeBatchUntilAppliedTimeoutForLocal, (*Server).SwitchConfig；用于 该包实现 iserver 相关逻辑。 |
| `pkg/cluster/channel/options.go` | 位于 pkg/cluster/channel 的配置/选项定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/icluster, github.com/WuKongIM/WuKongIM/pkg/raft/raftgroup 等 4 项；导出: Options, Option, NewOptions, WithNodeId, WithSlot, WithGroupCount, WithTransport, WithDB 等 14 项；关键函数/方法: NewOptions, WithNodeId, WithSlot, WithGroupCount, WithTransport, WithDB, WithChannelMaxReplicaCount, WithNode 等 12 项；用于 该包实现 options 相关逻辑。 |
| `pkg/cluster/channel/server.go` | 位于 pkg/cluster/channel 的服务端实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/fasthash, github.com/WuKongIM/WuKongIM/pkg/raft/raftgroup 等 7 项，标准库 sync；导出: Server, NewServer；关键函数/方法: NewServer, (*Server).Start, (*Server).Stop, (*Server).WakeLeaderIfNeed, (*Server).WakeFollowerfNeed, (*Server).AddEvent, (*Server).ChannelCount, (*Server).ExistChannel 等 14 项；用于 该包实现 server 相关逻辑。 |
| `pkg/cluster/channel/storage.go` | 位于 pkg/cluster/channel 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项；导出: 无；关键函数/方法: (*storage).GetState, (*storage).AppendLogs, (*storage).GetTermStartIndex, (*storage).LeaderLastLogTerm, (*storage).LeaderTermGreaterEqThan, (*storage).GetLogs, (*storage).Apply, (*storage).SaveConfig 等 13 项；用于 该包实现 storage 相关逻辑。 |
| `pkg/cluster/cluster/adaptive_send_queue.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/atomic 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 2 项；导出: TimerPool, AdaptiveSendQueue, NewTimerPool, NewAdaptiveSendQueue；关键函数/方法: NewTimerPool, NewAdaptiveSendQueue, (*TimerPool).Get, (*TimerPool).Put, (*AdaptiveSendQueue).EnablePriority, (*AdaptiveSendQueue).Send, (*AdaptiveSendQueue).Receive 等 18 项；用于 该包实现 adaptive_send_queue 相关逻辑。 |
| `pkg/cluster/cluster/api_channel.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/network, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项，标准库 context, errors 等 8 项；导出: 无；关键函数/方法: (*Server).channelSearch, (*Server).requestNodeChannelSearch, (*Server).subscribersGet, (*Server).denylistGet, (*Server).allowlistGet；用于 该包实现 api_channel 相关逻辑。 |
| `pkg/cluster/cluster/api_cluster.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/auth 等 8 项；导出: 无；关键函数/方法: (*Server).channelMigrate, (*Server).channelClusterConfig, (*Server).channelStart, (*Server).channelStop, (*Server).channelStatus, (*Server).channelReplicas, (*Server).getReplicaRoleFormatWithChannelClusterConfig 等 14 项；用于 该包实现 api_cluster 相关逻辑。 |
| `pkg/cluster/cluster/api_conversation.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/network, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项，标准库 context, errors 等 6 项；导出: 无；关键函数/方法: (*Server).conversationSearch, (*Server).requestConversationSearch；用于 该包实现 api_conversation 相关逻辑。 |
| `pkg/cluster/cluster/api_devtools.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkhttp；导出: 无；关键函数/方法: (*Server).checkLogConflict；用于 该包实现 api_devtools 相关逻辑。 |
| `pkg/cluster/cluster/api_message.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/network, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项，标准库 context, errors 等 8 项；导出: 无；关键函数/方法: (*Server).messageSearch, (*Server).requestNodeMessageSearch；用于 该包实现 api_message 相关逻辑。 |
| `pkg/cluster/cluster/api_node.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb, github.com/WuKongIM/WuKongIM/pkg/wkhttp 等 3 项，标准库 context, errors 等 9 项；导出: 无；关键函数/方法: (*Server).nodesGet, (*Server).nodeGet, (*Server).simpleNodesGet, (*Server).nodeChannelsGet；用于 该包实现 api_node 相关逻辑。 |
| `pkg/cluster/cluster/api_slot.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/auth 等 6 项；导出: 无；关键函数/方法: (*Server).slotsGet, (*Server).slotClusterConfigGet, (*Server).slotMigrate, (*Server).allSlotsGet, (*Server).getSlotInfo, (*Server).getSlotMaxLogIndex, (*Server).slotReplicasGet, (*Server).slotLocalReplicaGet 等 10 项；用于 该包实现 api_slot 相关逻辑。 |
| `pkg/cluster/cluster/api_user.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/network, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项，标准库 context, errors 等 7 项；导出: 无；关键函数/方法: (*Server).userSearch, (*Server).requestUserSearch, (*Server).deviceSearch, (*Server).requestDeviceSearch；用于 该包实现 api_user 相关逻辑。 |
| `pkg/cluster/cluster/common.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/network 等 5 项，标准库 errors, fmt 等 5 项；导出: BindJSON；关键函数/方法: BindJSON, (*Server).getLocalNodeInfo, (*Server).getNodeSlotCount, (*Server).getNodeSlotLeaderCount, (*Server).requestChannelStatus, (*Server).requestNodeInfo；用于 该包实现 common 相关逻辑。 |
| `pkg/cluster/cluster/const.go` | 位于 pkg/cluster/cluster 的类型/常量定义。导入/依赖: 无（无 import）；导出: MsgTypeUnknown, MsgTypeSlot, MsgTypeChannel, MsgTypeNode；关键函数/方法: 无；用于 该包实现 const 相关逻辑。 |
| `pkg/cluster/cluster/election_channel.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 3 项；导出: 无；关键函数/方法: (*Server).getOrCreateChannelClusterConfigFromLocal, (*Server).joinNewRepliceIfNeed, (*Server).switchLeaderIfNeed, (*Server).electionNewLeader, (*Server).requestChannelLastLogInfos, (*Server).createChannelClusterConfig；用于 该包实现 election_channel 相关逻辑。 |
| `pkg/cluster/cluster/election_slot.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sync/errgroup，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 2 项；导出: 无；关键函数/方法: (*Server).OnSlotElection, (*Server).handleSlotElection, (*Server).requestSlotInfos, (*Server).slotInfos, (*Server).collectSlotLogInfo, (*Server).calculateSlotLeader, (*Server).electionSlotLeaderBySlot；用于 该包实现 election_slot 相关逻辑。 |
| `pkg/cluster/cluster/errors.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/cluster/cluster/event.go` | 位于 pkg/cluster/cluster 的事件处理/事件定义。导入/依赖: 外部 github.com/panjf2000/gnet/v2, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/trace 等 5 项；导出: 无；关键函数/方法: (*Server).onMessage, (*Server).onNodeMessage, (*Server).onSlotMessage, (*Server).onChannelMessage；用于 该包实现 event 相关逻辑。 |
| `pkg/cluster/cluster/iserver.go` | 位于 pkg/cluster/cluster 的服务端实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 4 项；导出: 无；关键函数/方法: (*Server).GetOrCreateChannelClusterConfigFromSlotLeader, (*Server).SlotLeaderOfChannel, (*Server).SlotLeaderIdOfChannel, (*Server).LoadOnlyChannelClusterConfig, (*Server).LeaderOfChannel, (*Server).LeaderIdOfChannel, (*Server).LeaderOfChannelForRead 等 23 项；用于 该包实现 iserver 相关逻辑。 |
| `pkg/cluster/cluster/model.go` | 位于 pkg/cluster/cluster 的模型定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/clusterconfig 等 9 项；导出: ChannelLastLogInfoReq, ChannelLastLogInfoReqSet, ChannelLastLogInfoResponse, AppointLeaderReq, SyncInfo, ChannelClusterConfigReq 等 70 项；关键函数/方法: NewChannelClusterConfigRespFromClusterConfig, NewSlotResp, NewSlotClusterConfigRespFromClusterConfig 等 56 项；用于 该包实现 model 相关逻辑。 |
| `pkg/cluster/cluster/node.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 node 相关逻辑。 |
| `pkg/cluster/cluster/node_improved.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 3 项；导出: ImprovedNode, SendStrategy, BackpressureController, NodePerformanceMonitor, NewImprovedNode, SendStrategyDefault, SendStrategyBatch 等 10 项；关键函数/方法: NewImprovedNode, (*ImprovedNode).SetSendStrategy, (*ImprovedNode).Start 等 26 项；用于 该包实现 node_improved 相关逻辑。 |
| `pkg/cluster/cluster/node_manager.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 标准库 sync；导出: 无；关键函数/方法: (*nodeManager).addNode, (*nodeManager).removeNode, (*nodeManager).node, (*nodeManager).nodes, (*nodeManager).stop, (*nodeManager).exist；用于 该包实现 node_manager 相关逻辑。 |
| `pkg/cluster/cluster/options.go` | 位于 pkg/cluster/cluster 的配置/选项定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/auth 等 4 项；导出: Options, Option, NewOptions, WithDataDir, WithConfigOptions, WithSlotTransport, WithChannelTransport, WithMaxMessageBatchSize 等 24 项；关键函数/方法: NewOptions, WithDataDir, WithConfigOptions, WithSlotTransport, WithChannelTransport, WithMaxMessageBatchSize, WithReceiveQueueLength 等 22 项；用于 该包实现 options 相关逻辑。 |
| `pkg/cluster/cluster/rate.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 math, sync/atomic；导出: RateLimiter, NewRateLimiter；关键函数/方法: NewRateLimiter, (*RateLimiter).Enabled, (*RateLimiter).Increase, (*RateLimiter).Decrease, (*RateLimiter).Set, (*RateLimiter).Get, (*RateLimiter).RateLimited；用于 该包实现 rate 相关逻辑。 |
| `pkg/cluster/cluster/rpc_client.go` | 位于 pkg/cluster/cluster 的客户端实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types 等 4 项；导出: 无；关键函数/方法: (*rpcClient).RequestChannelProposeBatchUntilApplied, (*rpcClient).RequestSlotProposeBatchUntilApplied, (*rpcClient).RequestGetOrCreateChannelClusterConfig, (*rpcClient).RequestGetChannelClusterConfig, (*rpcClient).RequestSlotLastLogInfo 等 13 项；用于 该包实现 rpc_client 相关逻辑。 |
| `pkg/cluster/cluster/rpc_server.go` | 位于 pkg/cluster/cluster 的服务端实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 6 项；导出: 无；关键函数/方法: (*rpcServer).setRoutes, (*rpcServer).handleChannelPropose, (*rpcServer).handleSlotPropose, (*rpcServer).handleGetOrCreateChannelConfig, (*rpcServer).handleChannelConfig, (*rpcServer).handleSlotLastLogInfo, (*rpcServer).slotInfos 等 15 项；用于 该包实现 rpc_server 相关逻辑。 |
| `pkg/cluster/cluster/send_queue_config.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 无（无 import）；导出: SendQueueConfig, PerformanceTuningAdvice, DefaultSendQueueConfig, HighThroughputConfig, LowLatencyConfig, MemoryConstrainedConfig, AdaptiveConfig, GetConfigByProfile 等 10 项；关键函数/方法: DefaultSendQueueConfig, HighThroughputConfig, LowLatencyConfig, MemoryConstrainedConfig, AdaptiveConfig, GetConfigByProfile 等 9 项；用于 该包实现 send_queue_config 相关逻辑。 |
| `pkg/cluster/cluster/server.go` | 位于 pkg/cluster/cluster 的服务端实现。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/panjf2000/ants/v2 等 4 项，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/channel 等 14 项；导出: Server, New；关键函数/方法: New, (*Server).Start, (*Server).Stop, (*Server).NodeStep, (*Server).AddSlotEvent, (*Server).GetConfigServer, (*Server).WaitAllSlotReady, (*Server).ProposeToSlotUntilApplied 等 19 项；用于 该包实现 server 相关逻辑。 |
| `pkg/cluster/cluster/server_api.go` | 位于 pkg/cluster/cluster 的服务端实现。导入/依赖: 外部 github.com/sendgrid/rest，内部 github.com/WuKongIM/WuKongIM/pkg/wkhttp, github.com/WuKongIM/WuKongIM/pkg/wkutil，标准库 fmt, net/http 等 3 项；导出: 无；关键函数/方法: (*Server).ServerAPI, (*Server).formatPath；用于 该包实现 server_api 相关逻辑。 |
| `pkg/cluster/cluster/server_join.go` | 位于 pkg/cluster/cluster 的服务端实现。导入/依赖: 外部 go.uber.org/zap，标准库 errors, strconv 等 4 项；导出: 无；关键函数/方法: (*Server).joinLoop, (*Server).needJoin；用于 该包实现 server_join 相关逻辑。 |
| `pkg/cluster/cluster/test.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/clusterconfig, github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 3 项，标准库 context, fmt 等 4 项；导出: 无；关键函数/方法: (*testTransport).Send, (*testNodeTransport).Send, (*testEvent).OnSlotElection, (*testEvent).OnConfigChange；用于 该包实现 test 相关逻辑。 |
| `pkg/cluster/cluster/transport_channel.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/trace 等 5 项；导出: 无；关键函数/方法: (*channelTransport).Send；用于 该包实现 transport_channel 相关逻辑。 |
| `pkg/cluster/cluster/transport_node.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/trace 等 4 项；导出: 无；关键函数/方法: (*nodeTransport).Send；用于 该包实现 transport_node 相关逻辑。 |
| `pkg/cluster/cluster/transport_slot.go` | 位于 pkg/cluster/cluster 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/trace 等 5 项；导出: 无；关键函数/方法: (*slotTransport).Send；用于 该包实现 transport_slot 相关逻辑。 |
| `pkg/cluster/icluster/channel.go` | 位于 pkg/cluster/icluster 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types，标准库 context；导出: Channel；关键函数/方法: 无；用于 该包实现 channel 相关逻辑。 |
| `pkg/cluster/icluster/cluster.go` | 位于 pkg/cluster/icluster 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/wkdb 等 4 项，标准库 context, time；导出: ICluster, IClusterSlot, IClusterChannel, IClusterNode；关键函数/方法: 无；用于 该包实现 cluster 相关逻辑。 |
| `pkg/cluster/icluster/node.go` | 位于 pkg/cluster/icluster 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types；导出: Node；关键函数/方法: 无；用于 该包实现 node 相关逻辑。 |
| `pkg/cluster/icluster/rpc.go` | 位于 pkg/cluster/icluster 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: RPC；关键函数/方法: 无；用于 该包实现 rpc 相关逻辑。 |
| `pkg/cluster/icluster/slot.go` | 位于 pkg/cluster/icluster 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types，标准库 context；导出: Slot；关键函数/方法: 无；用于 该包实现 slot 相关逻辑。 |
| `pkg/cluster/icluster/store.go` | 位于 pkg/cluster/icluster 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: IStore；关键函数/方法: 无；用于 该包实现 store 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/cmd.go` | 位于 pkg/cluster/node/clusterconfig 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 3 项；导出: CMDType, CMD, NewCMD, EncodeApiServerAddrChange, DecodeApiServerAddrChange, EncodeNodeOnlineStatusChange, DecodeNodeOnlineStatusChange, EncodeMigrateSlot 等 28 项；关键函数/方法: NewCMD, EncodeApiServerAddrChange, DecodeApiServerAddrChange, EncodeNodeOnlineStatusChange 等 20 项；用于 该包实现 cmd 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/config.go` | 位于 pkg/cluster/node/clusterconfig 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/wklog 等 3 项，标准库 io, os 等 4 项；导出: Config, NewConfig；关键函数/方法: NewConfig, (*Config).loadConfigFromFile, (*Config).isInitialized, (*Config).id, (*Config).version, (*Config).setVersion, (*Config).versionInc, (*Config).term 等 41 项；用于 该包实现 config 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/errors.go` | 位于 pkg/cluster/node/clusterconfig 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrEmptyReqs；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/event.go` | 位于 pkg/cluster/node/clusterconfig 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types；导出: IEvent；关键函数/方法: 无；用于 该包实现 event 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/key/key.go` | 位于 pkg/cluster/node/clusterconfig/key 的模块实现。导入/依赖: 标准库 encoding/binary；导出: NewLogKey, NewMaxIndexKey, NewLeaderTermStartIndexKey, GetTermFromLeaderTermStartIndexKey, NewAppliedIndexKey；关键函数/方法: NewLogKey, NewMaxIndexKey, NewLeaderTermStartIndexKey, GetTermFromLeaderTermStartIndexKey, NewAppliedIndexKey；用于 该包实现 key 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/options.go` | 位于 pkg/cluster/node/clusterconfig 的配置/选项定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/raft；导出: Options, Option, NewOptions, WithNodeId, WithInitNodes, WithSlotCount, WithSlotMaxReplicaCount, WithChannelMaxReplicaCount 等 16 项；关键函数/方法: NewOptions, WithNodeId, WithInitNodes, WithSlotCount, WithSlotMaxReplicaCount, WithChannelMaxReplicaCount, WithTickInterval 等 14 项；用于 该包实现 options 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/server.go` | 位于 pkg/cluster/node/clusterconfig 的服务端实现。导入/依赖: 外部 github.com/bwmarrin/snowflake, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 5 项；导出: Server, New；关键函数/方法: New, (*Server).Start, (*Server).Options, (*Server).Stop, (*Server).AddEventListener, (*Server).RemoveEventListener, (*Server).NotifyConfigChangeEvent, (*Server).Propose 等 39 项；用于 该包实现 server 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/server_apply.go` | 位于 pkg/cluster/node/clusterconfig 的服务端实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 3 项；导出: 无；关键函数/方法: (*Server).applyLogs, (*Server).applyLog, (*Server).handleCmd, (*Server).handleConfigChange, (*Server).handleApiServerAddrChange, (*Server).handleNodeOnlineStatusChange, (*Server).handleSlotUpdate, (*Server).handleNodeJoin 等 12 项；用于 该包实现 server_apply 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/server_propose.go` | 位于 pkg/cluster/node/clusterconfig 的服务端实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types；导出: 无；关键函数/方法: (*Server).ProposeConfig, (*Server).ProposeApiServerAddr, (*Server).ProposeNodeOnlineStatus, (*Server).ProposeSlots, (*Server).ProposeJoined, (*Server).ProposeJoining, (*Server).ProposeJoin, (*Server).ProposeMigrateSlot 等 9 项；用于 该包实现 server_propose 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/storage.go` | 位于 pkg/cluster/node/clusterconfig 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/clusterconfig/key 等 4 项；导出: PebbleShardLogStorage, NewPebbleShardLogStorage；关键函数/方法: NewPebbleShardLogStorage, (*PebbleShardLogStorage).Open, (*PebbleShardLogStorage).Close, (*PebbleShardLogStorage).AppendLogs 等 26 项；用于 该包实现 storage 相关逻辑。 |
| `pkg/cluster/node/clusterconfig/transport.go` | 位于 pkg/cluster/node/clusterconfig 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: (*raftTransport).Send；用于 该包实现 transport 相关逻辑。 |
| `pkg/cluster/node/event/event.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types；导出: IEvent；关键函数/方法: 无；用于 该包实现 event 相关逻辑。 |
| `pkg/cluster/node/event/handle_node_joining.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/wkutil；导出: 无；关键函数/方法: (*Server).handleNodeJoining；用于 该包实现 handle_node_joining 相关逻辑。 |
| `pkg/cluster/node/event/handle_onlinestatus.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/wkutil；导出: 无；关键函数/方法: (*handler).handleOnlineStatus, (*handler).handleSlotChangeByNodeOnlineStatus；用于 该包实现 handle_onlinestatus 相关逻辑。 |
| `pkg/cluster/node/event/handle_slot_election.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types；导出: 无；关键函数/方法: (*handler).handleSlotLeaderElection；用于 该包实现 handle_slot_election 相关逻辑。 |
| `pkg/cluster/node/event/handle_slotleader_balance.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/wkutil；导出: 无；关键函数/方法: (*Server).handleSlotLeaderAutoBalance, (*Server).autoBalanceSlotLeaders；用于 该包实现 handle_slotleader_balance 相关逻辑。 |
| `pkg/cluster/node/event/handler.go` | 位于 pkg/cluster/node/event 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/clusterconfig, github.com/WuKongIM/WuKongIM/pkg/cluster/node/types 等 4 项，标准库 crypto/rand, math/big 等 3 项；导出: 无；关键函数/方法: (*lockedRand).Intn, (*handler).autoBalanceSlotLeaders；用于 该包实现 handler 相关逻辑。 |
| `pkg/cluster/node/event/handler_clusterinit.go` | 位于 pkg/cluster/node/event 的处理器实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types，标准库 time；导出: 无；关键函数/方法: (*handler).handleClusterInit；用于 该包实现 handler_clusterinit 相关逻辑。 |
| `pkg/cluster/node/event/handler_compare.go` | 位于 pkg/cluster/node/event 的处理器实现。导入/依赖: 外部 go.uber.org/zap，标准库 strings；导出: 无；关键函数/方法: (*handler).handleCompare；用于 该包实现 handler_compare 相关逻辑。 |
| `pkg/cluster/node/event/queue.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt；导出: EventQueue, NewEventQueue；关键函数/方法: NewEventQueue, (*EventQueue).Append, (*EventQueue).Len, (*EventQueue).Slice, (*EventQueue).TruncateTo, (*EventQueue).LastIndex, (*EventQueue).getArrayIndex, (*EventQueue).reset 等 9 项；用于 该包实现 queue 相关逻辑。 |
| `pkg/cluster/node/event/server.go` | 位于 pkg/cluster/node/event 的事件处理/事件定义。导入/依赖: 外部 github.com/lni/goutils/syncutil, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/clusterconfig, github.com/WuKongIM/WuKongIM/pkg/raft/types 等 3 项，标准库 sync, time；导出: Server, NewServer；关键函数/方法: NewServer, (*Server).Start, (*Server).Stop, (*Server).Step, (*Server).loopEvent, (*Server).handleEvents, (*Server).tick；用于 该包实现 server 相关逻辑。 |
| `pkg/cluster/node/handler/handler.go` | 位于 pkg/cluster/node/handler 的处理器实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types；导出: Handler, New；关键函数/方法: New, (*Handler).OnEvent；用于 该包实现 handler 相关逻辑。 |
| `pkg/cluster/node/types/config.go` | 位于 pkg/cluster/node/types 的模块实现。导入/依赖: 外部 google.golang.org/protobuf/proto，内部 github.com/WuKongIM/WuKongIMGoProto；导出: SlotSet；关键函数/方法: (*Config).Marshal, (*Config).Unmarshal, (*Config).Clone, (*Node).Marshal, (*Node).Unmarshal, (*Node).Clone, (*Slot).Clone, (*Slot).Marshal 等 13 项；用于 该包实现 config 相关逻辑。 |
| `pkg/cluster/node/types/config.pb.go` | 位于 pkg/cluster/node/types 的模块实现。导入/依赖: 外部 google.golang.org/protobuf/reflect/protoreflect 等 2 项；导出: NodeRole, NodeStatus, MigrateStatus, SlotStatus, LearnerStatus, Config, Node, Slot 等 36 项；关键函数/方法: (NodeRole).Enum, (NodeRole).String, (NodeRole).Descriptor, (NodeRole).Type, (NodeRole).Number, (NodeRole).EnumDescriptor, (NodeStatus).Enum, (NodeStatus).String 等 90 项；用于 该包实现 config.pb 相关逻辑。 |
| `pkg/cluster/node/types/config.proto` | 位于 pkg/cluster/node/types 的Protobuf 协议定义。导入/依赖: 无（无 import）；导出: Config, Node, Slot, SlotMigrate, Learner, NodeRole, NodeStatus, MigrateStatus 等 10 项；关键函数/方法: 无；用于 定义 types 包的消息结构与服务接口。 |
| `pkg/cluster/node/types/event.go` | 位于 pkg/cluster/node/types 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: EventType, Event, Unknown, RaftEvent, ConfigChange, NodeAdd；关键函数/方法: 无；用于 该包实现 event 相关逻辑。 |
| `pkg/cluster/slot/event.go` | 位于 pkg/cluster/slot 的事件处理/事件定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/raft/types 等 3 项；导出: 无；关键函数/方法: (*Server).OnConfigChange, (*Server).AddOrUpdateSlotRaft, (*Server).slotToConfig；用于 该包实现 event 相关逻辑。 |
| `pkg/cluster/slot/iserver.go` | 位于 pkg/cluster/slot 的服务端实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/trace，标准库 context, fmt 等 3 项；导出: 无；关键函数/方法: (*Server).GetSlotId, (*Server).SlotLeaderId, (*Server).ProposeUntilApplied, (*Server).ProposeUntilAppliedTimeout, (*Server).ProposeUntilAppliedTimeoutForLocal, (*Server).MustWaitAllSlotsReady；用于 该包实现 iserver 相关逻辑。 |
| `pkg/cluster/slot/key/key.go` | 位于 pkg/cluster/slot/key 的模块实现。导入/依赖: 标准库 encoding/binary, hash/fnv；导出: NewLogKey, NewMaxIndexKey, NewLeaderTermStartIndexKey, GetTermFromLeaderTermStartIndexKey, NewAppliedIndexKey；关键函数/方法: NewLogKey, NewMaxIndexKey, NewLeaderTermStartIndexKey, GetTermFromLeaderTermStartIndexKey, NewAppliedIndexKey；用于 该包实现 key 相关逻辑。 |
| `pkg/cluster/slot/options.go` | 位于 pkg/cluster/slot 的配置/选项定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/icluster, github.com/WuKongIM/WuKongIM/pkg/raft/raftgroup 等 3 项；导出: Options, Option, NewOptions, WithNodeId, WithDataDir, WithSlotDbShardNum, WithTransport, WithNode 等 12 项；关键函数/方法: NewOptions, WithNodeId, WithDataDir, WithSlotDbShardNum, WithTransport, WithNode, WithSlotCount, WithOnApply 等 10 项；用于 该包实现 options 相关逻辑。 |
| `pkg/cluster/slot/server.go` | 位于 pkg/cluster/slot 的服务端实现。导入/依赖: 外部 github.com/bwmarrin/snowflake, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/raftgroup 等 4 项；导出: Server, NewServer, SlotIdToKey, KeyToSlotId；关键函数/方法: NewServer, SlotIdToKey, KeyToSlotId, (*Server).Start, (*Server).Stop, (*Server).AddEvent, (*Server).WaitAllSlotReady, (*Server).GenLogId 等 14 项；用于 该包实现 server 相关逻辑。 |
| `pkg/cluster/slot/slot.go` | 位于 pkg/cluster/slot 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/node/types, github.com/WuKongIM/WuKongIM/pkg/raft/raft 等 3 项；导出: Slot；关键函数/方法: (*Slot).LastLogIndexAndTerm, (*Slot).needUpdate；用于 该包实现 slot 相关逻辑。 |
| `pkg/cluster/slot/storage_pebble.go` | 位于 pkg/cluster/slot 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/cluster/slot/key 等 4 项；导出: PebbleShardLogStorage, NewPebbleShardLogStorage；关键函数/方法: NewPebbleShardLogStorage, (*PebbleShardLogStorage).Open, (*PebbleShardLogStorage).Close, (*PebbleShardLogStorage).GetState, (*PebbleShardLogStorage).AppendLogs 等 27 项；用于 该包实现 storage_pebble 相关逻辑。 |
| `pkg/cluster/store/channel.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: 无；关键函数/方法: (*Store).AddSubscribers, (*Store).ExistSubscriber, (*Store).RemoveSubscribers, (*Store).RemoveAllSubscriber, (*Store).GetSubscribers, (*Store).AddChannelInfo, (*Store).UpdateChannelInfo, (*Store).DeleteChannel 等 21 项；用于 该包实现 channel 相关逻辑。 |
| `pkg/cluster/store/channel_clusterconfig.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: 无；关键函数/方法: (*Store).SaveChannelClusterConfig；用于 该包实现 channel_clusterconfig 相关逻辑。 |
| `pkg/cluster/store/conversation.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 外部 go.uber.org/zap 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: 无；关键函数/方法: (*Store).AddOrUpdateConversations, (*Store).AddOrUpdateUserConversations, (*Store).AddConversationsIfNotExist, (*Store).UpdateConversationDeletedAtMsgSeq, (*Store).DeleteConversation, (*Store).DeleteConversations, (*Store).GetConversations 等 13 项；用于 该包实现 conversation 相关逻辑。 |
| `pkg/cluster/store/message.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/wkdb，标准库 context；导出: 无；关键函数/方法: (*Store).AppendMessages, (*Store).AppendMessageChunks, (*Store).LoadNextRangeMsgs, (*Store).LoadMsg, (*Store).LoadLastMsgs, (*Store).LoadLastMsgsWithEnd, (*Store).LoadPrevRangeMsgs, (*Store).GetLastMsgSeq 等 17 项；用于 该包实现 message 相关逻辑。 |
| `pkg/cluster/store/model.go` | 位于 pkg/cluster/store 的模型定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb 等 3 项；导出: CMDType, CMD, NewCMD, NewCMDWithVersion, EncodeMembers, EncodeChannelUids, EncodeChannel, EncodeCMDUser 等 75 项；关键函数/方法: NewCMD, NewCMDWithVersion, EncodeMembers, EncodeChannelUids, EncodeChannel, EncodeCMDUser, EncodeCMDDevice, EncodeCMDUserAndDevice 等 61 项；用于 该包实现 model 相关逻辑。 |
| `pkg/cluster/store/options.go` | 位于 pkg/cluster/store 的配置/选项定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/cluster/icluster, github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: Options, Option, NewOptions, WithNodeId, WithSlot, WithChannel, WithDB, WithIsCmdChannel；关键函数/方法: NewOptions, WithNodeId, WithSlot, WithChannel, WithDB, WithIsCmdChannel；用于 该包实现 options 相关逻辑。 |
| `pkg/cluster/store/plugin.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb, github.com/WuKongIM/WuKongIM/pkg/wkutil，标准库 time；导出: 无；关键函数/方法: (*Store).UpdateUserPluginNo, (*Store).RemovePluginUser；用于 该包实现 plugin 相关逻辑。 |
| `pkg/cluster/store/store.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb, github.com/WuKongIM/WuKongIM/pkg/wklog；导出: Store, New；关键函数/方法: New, (*Store).NextPrimaryKey, (*Store).DB, (*Store).GetShardNum, (*Store).GetChannelShardIndex, (*Store).Start, (*Store).Stop；用于 该包实现 store 相关逻辑。 |
| `pkg/cluster/store/store_apply.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types 等 2 项；导出: 无；关键函数/方法: (*Store).ApplySlotLogs, (*Store).applyCMDs, (*Store).applyCMD, (*Store).applyLog, (*Store).loopSaveChannelClusterConfig, (*Store).handleChannelClusterConfigSave, (*Store).handleChannelClusterConfigSavesForCMDs, (*Store).handleAddSubscribers 等 42 项；用于 该包实现 store_apply 相关逻辑。 |
| `pkg/cluster/store/stream.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: 无；关键函数/方法: (*Store).AddStreamMeta, (*Store).GetStreamMeta, (*Store).AddStreams, (*Store).GetStreams, (*Store).SaveStreamV2, (*Store).GetStreamV2, (*Store).GetStreamV2s；用于 该包实现 stream 相关逻辑。 |
| `pkg/cluster/store/tester.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb；导出: 无；关键函数/方法: (*Store).AddOrUpdateTester, (*Store).GetTester, (*Store).GetTesters, (*Store).RemoveTester；用于 该包实现 tester 相关逻辑。 |
| `pkg/cluster/store/user.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb, github.com/WuKongIM/WuKongIMGoProto；导出: 无；关键函数/方法: (*Store).AddUser, (*Store).GetUser, (*Store).UpdateUser, (*Store).UpdateDevice, (*Store).AddDevice, (*Store).GetDevice, (*Store).GetSystemUids, (*Store).AddSystemUids 等 9 项；用于 该包实现 user 相关逻辑。 |
| `pkg/cluster/store/version.go` | 位于 pkg/cluster/store 的模块实现。导入/依赖: 无（无 import）；导出: CmdVersion, CmdVersionChannelInfo, CmdVersionStreamV2；关键函数/方法: (CmdVersion).Uint16；用于 该包实现 version 相关逻辑。 |
| `pkg/errors/errors.go` | 位于 pkg/errors 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrEmptyEngine, ErrEngineShutdown, ErrEngineInShutdown, ErrAcceptSocket, ErrTooManyEventLoopThreads, ErrUnsupportedProtocol, ErrUnsupportedTCPProtocol, ErrUnsupportedUDPProtocol 等 13 项；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/fasthash/fasthash.go` | 位于 pkg/fasthash 的模块实现。导入/依赖: 无（无 import）；导出: Hash；关键函数/方法: Hash；用于 该包实现 fasthash 相关逻辑。 |
| `pkg/fasttime/fasttime.go` | 位于 pkg/fasttime 的模块实现。导入/依赖: 标准库 sync/atomic, time；导出: UnixTimestamp, UnixDate, UnixHour；关键函数/方法: UnixTimestamp, UnixDate, UnixHour, init；用于 该包实现 fasttime 相关逻辑。 |
| `pkg/grpcpool/pool.go` | 位于 pkg/grpcpool 的模块实现。导入/依赖: 外部 google.golang.org/grpc, google.golang.org/grpc/connectivity，标准库 context 等 4 项；导出: Factory, FactoryWithContext, Pool, ClientConn, New, NewWithContext, MaxErrorCount, ErrClosed 等 11 项；关键函数/方法: New, NewWithContext, (*Pool).Close, (*Pool).IsClosed, (*Pool).Get, (*ClientConn).Unhealthy, (*ClientConn).ErrorCountInc, (*ClientConn).ErrorCountReset 等 13 项；用于 该包实现 pool 相关逻辑。 |
| `pkg/jsonrpc/codec.go` | 位于 pkg/jsonrpc 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIMGoProto，标准库 encoding/json, errors 等 3 项；导出: Probe, Encode, EncodeErrorResponse, DecodeID, Decode, ToFrame, FromFrame, IsJSONObjectPrefix 等 28 项；关键函数/方法: Encode, EncodeErrorResponse, DecodeID, Decode, ToFrame, FromFrame, IsJSONObjectPrefix；用于 该包实现 codec 相关逻辑。 |
| `pkg/jsonrpc/example_event.go` | 位于 pkg/jsonrpc 的事件处理/事件定义。导入/依赖: 标准库 encoding/json, fmt 等 3 项；导出: ExampleEventNotification, ExampleEventNotificationMinimal, ExampleEventNotificationBatch；关键函数/方法: ExampleEventNotification, ExampleEventNotificationMinimal, ExampleEventNotificationBatch；用于 该包实现 example_event 相关逻辑。 |
| `pkg/jsonrpc/example_new_fields.go` | 位于 pkg/jsonrpc 的模块实现。导入/依赖: 标准库 encoding/json, fmt 等 3 项；导出: ExampleNewFields, ExampleEndReasonUsage, ExampleBackwardCompatibility；关键函数/方法: ExampleNewFields, ExampleEndReasonUsage, ExampleBackwardCompatibility；用于 该包实现 example_new_fields 相关逻辑。 |
| `pkg/jsonrpc/types.go` | 位于 pkg/jsonrpc 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkutil 等 2 项；导出: DeviceFlagEnum, ReasonCodeEnum, StreamFlagEnum, ActionEnum, Header, SettingFlags, ErrorObject, BaseRequest 等 59 项；关键函数/方法: FromProtoConnectAck, FromProtoSendAck, FromProtoRecvPacket, FromProtoDisconnectPacket, FromProtoPongPacket, NewRequest, NewGenericResponse, NewGenericResponseWithErr 等 23 项；用于 该包实现 types 相关逻辑。 |
| `pkg/keylock/keylock.go` | 位于 pkg/keylock 的模块实现。导入/依赖: 标准库 sync, sync/atomic 等 3 项；导出: KeyLock, NewKeyLock；关键函数/方法: NewKeyLock, (*KeyLock).Lock, (*KeyLock).Unlock, (*KeyLock).Clean, (*KeyLock).StartCleanLoop, (*KeyLock).StopCleanLoop, (*KeyLock).cleanLoop, (*innerLock).add 等 9 项；用于 该包实现 keylock 相关逻辑。 |
| `pkg/mqtt/connect.go` | 位于 pkg/mqtt 的类型/常量定义。导入/依赖: 无（无 import）；导出: ConnectPacket；关键函数/方法: 无；用于 该包实现 connect 相关逻辑。 |
| `pkg/mqtt/const.go` | 位于 pkg/mqtt 的类型/常量定义。导入/依赖: 无（无 import）；导出: ReasonCode, Success, NoMatchingSubscribers, UnspecifiedError, MalformedPacket, ProtocolError, ImplSpecificError, NotAuthorized 等 25 项；关键函数/方法: 无；用于 该包实现 const 相关逻辑。 |
| `pkg/mqtt/controlPacket.go` | 位于 pkg/mqtt 的类型/常量定义。导入/依赖: 标准库 io；导出: ControlPacket；关键函数/方法: 无；用于 该包实现 controlPacket 相关逻辑。 |
| `pkg/mqtt/protocol.go` | 位于 pkg/mqtt 的模块实现。导入/依赖: 标准库 io；导出: ReadFrom；关键函数/方法: ReadFrom；用于 该包实现 protocol 相关逻辑。 |
| `pkg/network/network.go` | 位于 pkg/network 的模块实现。导入/依赖: 外部 github.com/sendgrid/rest，内部 github.com/WuKongIM/WuKongIM/pkg/wkutil，标准库 fmt, io 等 5 项；导出: Post, Put, PostForQueryParam, RequestBoyForQueryParam, RequestBoy, Get, GetJson, PostForWWWFormForBytres 等 11 项；关键函数/方法: Post, Put, PostForQueryParam, RequestBoyForQueryParam, RequestBoy, Get, GetJson, PostForWWWFormForBytres 等 11 项；用于 该包实现 network 相关逻辑。 |
| `pkg/pool/byteslice/byteslice.go` | 位于 pkg/pool/byteslice 的模块实现。导入/依赖: 标准库 math, math/bits 等 6 项；导出: Pool, Get, Put；关键函数/方法: Get, Put, (*Pool).Get, (*Pool).Put；用于 该包实现 byteslice 相关逻辑。 |
| `pkg/pool/ringbuffer/ringbuffer.go` | 位于 pkg/pool/ringbuffer 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/ring，标准库 math/bits, sort 等 4 项；导出: RingBuffer, Pool, Get, Put；关键函数/方法: Get, Put, (*Pool).Get, (*Pool).Put, (callSizes).Len, (callSizes).Less, (callSizes).Swap, (*Pool).calibrate；用于 该包实现 ringbuffer 相关逻辑。 |
| `pkg/promtail/options.go` | 位于 pkg/promtail 的配置/选项定义。导入/依赖: 标准库 time；导出: Options, NewOptions；关键函数/方法: NewOptions；用于 该包实现 options 相关逻辑。 |
| `pkg/promtail/promtail.go` | 位于 pkg/promtail 的模块实现。导入/依赖: 外部 github.com/go-kit/log, github.com/grafana/dskit/flagext 等 11 项，标准库 fmt, os 等 3 项；导出: Promtail, New；关键函数/方法: New, (*Promtail).Start, (*Promtail).Stop；用于 该包实现 promtail 相关逻辑。 |
| `pkg/pse/pse_darwin.go` | 位于 pkg/pse 的模块实现。导入/依赖: 标准库 math, sync 等 4 项；导出: ProcUsage；关键函数/方法: ProcUsage, init；用于 该包实现 pse_darwin 相关逻辑。 |
| `pkg/pse/pse_freebsd.go` | 位于 pkg/pse 的模块实现。导入/依赖: 标准库 C, syscall；导出: ProcUsage；关键函数/方法: ProcUsage；用于 该包实现 pse_freebsd 相关逻辑。 |
| `pkg/pse/pse_freebsd_amd64.go` | 位于 pkg/pse 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 encoding/binary, syscall；导出: ProcUsage, KIP_OFF_size, KIP_OFF_rssize, KIP_OFF_pctcpu；关键函数/方法: ProcUsage, init；用于 该包实现 pse_freebsd_amd64 相关逻辑。 |
| `pkg/pse/pse_linux.go` | 位于 pkg/pse 的模块实现。导入/依赖: 标准库 bytes, fmt 等 6 项；导出: ProcUsage；关键函数/方法: ProcUsage, init；用于 该包实现 pse_linux 相关逻辑。 |
| `pkg/pse/pse_openbsd.go` | 位于 pkg/pse 的模块实现。导入/依赖: 标准库 fmt, os 等 3 项；导出: ProcUsage；关键函数/方法: ProcUsage；用于 该包实现 pse_openbsd 相关逻辑。 |
| `pkg/pse/pse_rumprun.go` | 位于 pkg/pse 的模块实现。导入/依赖: 无（无 import）；导出: ProcUsage；关键函数/方法: ProcUsage；用于 该包实现 pse_rumprun 相关逻辑。 |
| `pkg/pse/pse_solaris.go` | 位于 pkg/pse 的模块实现。导入/依赖: 无（无 import）；导出: ProcUsage；关键函数/方法: ProcUsage；用于 该包实现 pse_solaris 相关逻辑。 |
| `pkg/pse/pse_wasm.go` | 位于 pkg/pse 的模块实现。导入/依赖: 无（无 import）；导出: ProcUsage；关键函数/方法: ProcUsage；用于 该包实现 pse_wasm 相关逻辑。 |
| `pkg/pse/pse_windows.go` | 位于 pkg/pse 的模块实现。导入/依赖: 标准库 fmt, os 等 8 项；导出: PDH_HQUERY, PDH_HCOUNTER, PDH_FMT_COUNTERVALUE_DOUBLE, PDH_FMT_COUNTERVALUE_ITEM_DOUBLE, ProcUsage, PDH_FMT_DOUBLE, PDH_INVALID_DATA, PDH_MORE_DATA；关键函数/方法: ProcUsage；用于 该包实现 pse_windows 相关逻辑。 |
| `pkg/raft/raft/common.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 标准库 crypto/rand, math 等 4 项；导出: SyncInfo, None, All；关键函数/方法: (*lockedRand).Intn；用于 该包实现 common 相关逻辑。 |
| `pkg/raft/raft/errors.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/raft/raft/model.go` | 位于 pkg/raft/raft 的模型定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: 无；用于 该包实现 model 相关逻辑。 |
| `pkg/raft/raft/node.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, sync；导出: Node, NewNode；关键函数/方法: NewNode, (*Node).Key, (*Node).LastLogIndex, (*Node).LastLogTerm, (*Node).LastTerm, (*Node).HasReady, (*Node).Suspend, (*Node).Ready 等 20 项；用于 该包实现 node 相关逻辑。 |
| `pkg/raft/raft/node_become.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: (*Node).BecomeCandidate, (*Node).BecomeFollower, (*Node).BecomeLeader, (*Node).BecomeLearner, (*Node).reset；用于 该包实现 node_become 相关逻辑。 |
| `pkg/raft/raft/node_config.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/wkutil，标准库 errors；导出: 无；关键函数/方法: (*Node).switchConfig, (*Node).roleChangeIfNeed；用于 该包实现 node_config 相关逻辑。 |
| `pkg/raft/raft/node_send.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: (*Node).sendNotifySync, (*Node).sendSyncReq, (*Node).sendVoteReq, (*Node).sendVoteResp, (*Node).sendPing, (*Node).sendStoreReq, (*Node).sendApplyReq, (*Node).sendGetLogsReq 等 16 项；用于 该包实现 node_send 相关逻辑。 |
| `pkg/raft/raft/node_step.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/track, github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: (*Node).Step, (*Node).stepLeader, (*Node).stepFollower, (*Node).stepCandidate, (*Node).stepLearner, (*Node).poll, (*Node).quorum, (*Node).canVote 等 14 项；用于 该包实现 node_step 相关逻辑。 |
| `pkg/raft/raft/node_tick.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: (*Node).Tick, (*Node).tickLeader, (*Node).tickFollower, (*Node).tickSync, (*Node).tickLearner, (*Node).tickCandidate, (*Node).tickElection, (*Node).tickHeartbeat 等 13 项；用于 该包实现 node_tick 相关逻辑。 |
| `pkg/raft/raft/options.go` | 位于 pkg/raft/raft 的配置/选项定义。导入/依赖: 标准库 time；导出: Options, Option, NewOptions, WithNodeId, WithTickInterval, WithSyncInterval, WithElectionOn, WithHeartbeatInterval 等 24 项；关键函数/方法: NewOptions, WithNodeId, WithTickInterval, WithSyncInterval, WithElectionOn, WithHeartbeatInterval, WithElectionInterval, WithReplicas 等 22 项；用于 该包实现 options 相关逻辑。 |
| `pkg/raft/raft/queue.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt；导出: 无；关键函数/方法: (*queue).append, (*queue).hasNextStoreLogs, (*queue).nextStoreLogs, (*queue).hasNextApplyLogs, (*queue).nextApplyLogs, (*queue).storeTo, (*queue).appliedTo, (*queue).truncateLogTo；用于 该包实现 queue 相关逻辑。 |
| `pkg/raft/raft/raft.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/panjf2000/ants/v2 等 4 项，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types, github.com/WuKongIM/WuKongIM/pkg/wait 等 4 项，标准库 context, errors 等 5 项；导出: Raft, New；关键函数/方法: New, (*Raft).Start, (*Raft).Stop, (*Raft).Pause, (*Raft).Resume, (*Raft).Step, (*Raft).StepWait, (*Raft).IsLeader 等 26 项；用于 该包实现 raft 相关逻辑。 |
| `pkg/raft/raft/raft_propose.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types，标准库 context, errors 等 3 项；导出: 无；关键函数/方法: (*Raft).Propose, (*Raft).ProposeUntilAppliedTimeout, (*Raft).ProposeUntilApplied, (*Raft).ProposeBatchTimeout, (*Raft).ProposeBatchUntilAppliedTimeout, (*Raft).proposeBatch, (*Raft).handleSendPropose, (*Raft).sendProposeRespError 等 10 项；用于 该包实现 raft_propose 相关逻辑。 |
| `pkg/raft/raft/storage.go` | 位于 pkg/raft/raft 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: Storage；关键函数/方法: 无；用于 该包实现 storage 相关逻辑。 |
| `pkg/raft/raft/transport.go` | 位于 pkg/raft/raft 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: Transport；关键函数/方法: 无；用于 该包实现 transport 相关逻辑。 |
| `pkg/raft/raft/wait.go` | 位于 pkg/raft/raft 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, sync；导出: 无；关键函数/方法: (*wait).waitApply, (*wait).waitCommit, (*wait).didCommit, (*wait).didApply, (*wait).clean；用于 该包实现 wait 相关逻辑。 |
| `pkg/raft/raftgroup/errors.go` | 位于 pkg/raft/raftgroup 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrGroupStopped, ErrRaftNotExist；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/raft/raftgroup/event.go` | 位于 pkg/raft/raftgroup 的事件处理/事件定义。导入/依赖: 无（无 import）；导出: IEvent；关键函数/方法: 无；用于 该包实现 event 相关逻辑。 |
| `pkg/raft/raftgroup/event_queue.go` | 位于 pkg/raft/raftgroup 的事件处理/事件定义。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 sync；导出: EventQueue, NewEventQueue；关键函数/方法: NewEventQueue, (*EventQueue).Add, (*EventQueue).MustAdd, (*EventQueue).Get, (*EventQueue).shrinkNodropArray, (*EventQueue).targetQueue, (*EventQueue).tryAdd, (*EventQueue).gc；用于 该包实现 event_queue 相关逻辑。 |
| `pkg/raft/raftgroup/handle.go` | 位于 pkg/raft/raftgroup 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types 等 2 项；导出: 无；关键函数/方法: (*RaftGroup).handleStoreReq, (*RaftGroup).handleGetLogsReq, (*RaftGroup).handleTruncateReq, (*RaftGroup).handleApplyReq, (*RaftGroup).getTrunctLogIndex, (*RaftGroup).handleRoleChangeReq, (*RaftGroup).learnTo, (*RaftGroup).followerToLeader 等 9 项；用于 该包实现 handle 相关逻辑。 |
| `pkg/raft/raftgroup/list.go` | 位于 pkg/raft/raftgroup 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 sync；导出: 无；关键函数/方法: (*linkedList).push, (*linkedList).existNoLock, (*linkedList).remove, (*linkedList).get, (*linkedList).count, (*linkedList).readHandlers, (*linkedList).all；用于 该包实现 list 相关逻辑。 |
| `pkg/raft/raftgroup/options.go` | 位于 pkg/raft/raftgroup 的配置/选项定义。导入/依赖: 标准库 time；导出: Options, Option, NewOptions, WithTickInterval, WithGoPoolSize, WithStorage, WithReceiveQueueLength, WithMaxLogSizePerBatch 等 13 项；关键函数/方法: NewOptions, WithTickInterval, WithGoPoolSize, WithStorage, WithReceiveQueueLength, WithMaxLogSizePerBatch, WithTransport, WithProposeTimeout 等 11 项；用于 该包实现 options 相关逻辑。 |
| `pkg/raft/raftgroup/raft.go` | 位于 pkg/raft/raftgroup 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: IRaft；关键函数/方法: 无；用于 该包实现 raft 相关逻辑。 |
| `pkg/raft/raftgroup/raftgroup.go` | 位于 pkg/raft/raftgroup 的模块实现。导入/依赖: 外部 github.com/lni/goutils/syncutil, github.com/panjf2000/ants/v2 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/raft/track 等 4 项；导出: RaftGroup, New；关键函数/方法: New, (*RaftGroup).Options, (*RaftGroup).AddRaft, (*RaftGroup).RemoveRaft, (*RaftGroup).GetRaft, (*RaftGroup).GetRafts, (*RaftGroup).GetRaftCount, (*RaftGroup).IsLeader 等 20 项；用于 该包实现 raftgroup 相关逻辑。 |
| `pkg/raft/raftgroup/raftgroup_propose.go` | 位于 pkg/raft/raftgroup 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: 无；关键函数/方法: (*RaftGroup).Propose, (*RaftGroup).ProposeUntilApplied, (*RaftGroup).ProposeTimeout, (*RaftGroup).ProposeBatchTimeout, (*RaftGroup).ProposeBatchUntilAppliedTimeout, (*RaftGroup).proposeBatchTimeout, (*RaftGroup).fowardPropose 等 10 项；用于 该包实现 raftgroup_propose 相关逻辑。 |
| `pkg/raft/raftgroup/rate_limter.go` | 位于 pkg/raft/raftgroup 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 math, sync/atomic；导出: RateLimiter, NewRateLimiter；关键函数/方法: NewRateLimiter, (*RateLimiter).Enabled, (*RateLimiter).Increase, (*RateLimiter).Decrease, (*RateLimiter).Set, (*RateLimiter).Get, (*RateLimiter).RateLimited；用于 该包实现 rate_limter 相关逻辑。 |
| `pkg/raft/raftgroup/storage.go` | 位于 pkg/raft/raftgroup 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: IStorage；关键函数/方法: 无；用于 该包实现 storage 相关逻辑。 |
| `pkg/raft/raftgroup/transport.go` | 位于 pkg/raft/raftgroup 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: ITransport；关键函数/方法: 无；用于 该包实现 transport 相关逻辑。 |
| `pkg/raft/raftgroup/types.go` | 位于 pkg/raft/raftgroup 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/types；导出: Event；关键函数/方法: 无；用于 该包实现 types 相关逻辑。 |
| `pkg/raft/raftgroup/wait.go` | 位于 pkg/raft/raftgroup 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, sync；导出: 无；关键函数/方法: (*progress).String, (*wait).waitApply, (*wait).didApply, (*wait).bucketIndex, (*wait).put, (*waitBucket).waitApply, (*waitBucket).didApply, (*waitBucket).put 等 10 项；用于 该包实现 wait 相关逻辑。 |
| `pkg/raft/track/track.go` | 位于 pkg/raft/track 的模块实现。导入/依赖: 标准库 bytes, encoding/binary 等 4 项；导出: Position, Record, PositionUnknown, PositionStart, PositionPropose, PositionSync, PositionSyncResp；关键函数/方法: (Position).String, (*Record).Add, (*Record).Size, (*Record).HasData, (*Record).Clone, (*Record).Encode, (*Record).Decode, (*Record).String；用于 该包实现 track 相关逻辑。 |
| `pkg/raft/types/errros.go` | 位于 pkg/raft/types 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrLogIndexNotContinuous, ErrStopped, ErrNotLeader, ErrPaused, ErrProposalDropped；关键函数/方法: 无；用于 该包实现 errros 相关逻辑。 |
| `pkg/raft/types/types.go` | 位于 pkg/raft/types 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/raft/track, github.com/WuKongIM/WuKongIMGoProto，标准库 encoding/binary, fmt 等 4 项；导出: Reason, EventType, Speed, Event, Log, Config, ConfigEventType, ConfigEvent 等 60 项；关键函数/方法: IsEmptyLog, (Reason).Uint8, (Reason).String, (EventType).String, (Event).Marshal, (*Event).Unmarshal, (Event).Size, (Event).String 等 24 项；用于 该包实现 types 相关逻辑。 |
| `pkg/ring/ring_buffer.go` | 位于 pkg/ring 的模块实现。导入/依赖: 外部 github.com/panjf2000/gnet/v2/pkg/pool/byteslice，标准库 errors, io 等 4 项；导出: Buffer, New, CeilToPowerOfTwo, StringToBytes, MinRead, DefaultBufferSize, ErrIsEmpty；关键函数/方法: New, CeilToPowerOfTwo, StringToBytes, (*Buffer).Peek, (*Buffer).PeekFromPos, (*Buffer).Discard, (*Buffer).Read, (*Buffer).ReadByte 等 24 项；用于 该包实现 ring_buffer 相关逻辑。 |
| `pkg/ring/ring_buffer_unix.go` | 位于 pkg/ring 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，内部 github.com/WuKongIM/WuKongIM/pkg/wknet/io；导出: 无；关键函数/方法: (*Buffer).CopyFromSocket, (*Buffer).Rewind；用于 该包实现 ring_buffer_unix 相关逻辑。 |
| `pkg/ringlock/ringlock.go` | 位于 pkg/ringlock 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/fasthash，标准库 sync；导出: RingLock, NewRingLock；关键函数/方法: NewRingLock, (*RingLock).Lock, (*RingLock).Unlock, (*RingLock).lockPosition；用于 该包实现 ringlock 相关逻辑。 |
| `pkg/trace/common.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 go.opentelemetry.io/otel/metric；导出: NewInt64Counter, NewInt64UpDownCounter, NewInt64ObservableCounter, NewFloat64ObservableCounter, NewFloat64ObservableGauge, NewInt64ObservableGauge, RegisterCallback；关键函数/方法: NewInt64Counter, NewInt64UpDownCounter, NewInt64ObservableCounter, NewFloat64ObservableCounter, NewFloat64ObservableGauge 等 7 项；用于 该包实现 common 相关逻辑。 |
| `pkg/trace/empty.go` | 位于 pkg/trace 的模块实现。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 empty 相关逻辑。 |
| `pkg/trace/metrics.go` | 位于 pkg/trace 的类型/常量定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wkhttp；导出: ClusterKind, IMetrics, ISystemMetrics, IDBMetrics, IAppMetrics, IClusterMetrics, ClusterKindUnknown, ClusterKindSlot 等 11 项；关键函数/方法: 无；用于 该包实现 metrics 相关逻辑。 |
| `pkg/trace/metrics_app.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 go.opentelemetry.io/otel/metric 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: 无；关键函数/方法: (*appMetrics).ConnCountAdd, (*appMetrics).OnlineUserCountAdd, (*appMetrics).OnlineUserCountSet, (*appMetrics).OnlineDeviceCountAdd, (*appMetrics).OnlineDeviceCountSet, (*appMetrics).MessageLatencyOb, (*appMetrics).PingBytesAdd 等 38 项；用于 该包实现 metrics_app 相关逻辑。 |
| `pkg/trace/metrics_cluster.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 go.opentelemetry.io/otel/metric 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: 无；关键函数/方法: (*clusterMetrics).MessageIncomingBytesAdd, (*clusterMetrics).MessageOutgoingBytesAdd, (*clusterMetrics).MessageIncomingCountAdd, (*clusterMetrics).MessageOutgoingCountAdd, (*clusterMetrics).MessageConcurrencyAdd 等 60 项；用于 该包实现 metrics_cluster 相关逻辑。 |
| `pkg/trace/metrics_db.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 go.opentelemetry.io/otel/metric 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: NewDBMetrics；关键函数/方法: NewDBMetrics, (*dbMetrics).CompactTotalCountSet, (*dbMetrics).CompactDefaultCountSet, (*dbMetrics).CompactDeleteOnlyCountSet, (*dbMetrics).CompactElisionOnlyCountSet, (*dbMetrics).CompactMoveCountSet 等 131 项；用于 该包实现 metrics_db 相关逻辑。 |
| `pkg/trace/metrics_default.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 github.com/prometheus/client_golang/api/prometheus/v1, github.com/prometheus/common/model 等 4 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkhttp 等 2 项；导出: 无；关键函数/方法: (*metrics).System, (*metrics).App, (*metrics).Cluster, (*metrics).DB, (*metrics).Route, (*metrics).appMetrics, (*metrics).clusterMetrics, (*metrics).systemMetrics 等 17 项；用于 该包实现 metrics_default 相关逻辑。 |
| `pkg/trace/metrics_system.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 go.opentelemetry.io/otel/metric 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: 无；关键函数/方法: (*systemMetrics).IntranetIncomingAdd, (*systemMetrics).IntranetOutgoingAdd, (*systemMetrics).ExtranetIncomingAdd, (*systemMetrics).ExtranetOutgoingAdd, (*systemMetrics).CPUUsageAdd, (*systemMetrics).MemoryUsageAdd 等 8 项；用于 该包实现 metrics_system 相关逻辑。 |
| `pkg/trace/options.go` | 位于 pkg/trace 的配置/选项定义。导入/依赖: 外部 github.com/prometheus/client_golang/api 等 4 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: Options, Option, NewOptions, WithServiceName, WithServiceHostName, WithPrometheusApiUrl, WithReqTimeout；关键函数/方法: NewOptions, WithServiceName, WithServiceHostName, WithPrometheusApiUrl, WithReqTimeout, (*Options).requestPrometheus；用于 该包实现 options 相关逻辑。 |
| `pkg/trace/otel.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 go.opentelemetry.io/otel, go.opentelemetry.io/otel/exporters/prometheus 等 4 项，标准库 context, errors 等 3 项；导出: 无；关键函数/方法: (*Trace).setupOTelSDK；用于 该包实现 otel 相关逻辑。 |
| `pkg/trace/trace.go` | 位于 pkg/trace 的模块实现。导入/依赖: 外部 github.com/prometheus/client_golang/prometheus/promhttp, go.opentelemetry.io/otel，内部 github.com/WuKongIM/WuKongIM/pkg/wkhttp, github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 context, net/http；导出: Trace, SetGlobalTrace, New, GlobalTrace；关键函数/方法: SetGlobalTrace, New, (*Trace).Start, (*Trace).Stop, (*Trace).Handler, (*Trace).Route；用于 该包实现 trace 相关逻辑。 |
| `pkg/wait/wait.go` | 位于 pkg/wait 的模块实现。导入/依赖: 标准库 hash/crc32, log 等 3 项；导出: Wait, New；关键函数/方法: New, (*list).Register, (*list).Trigger, (*list).IsRegistered, (*list).strToNum；用于 该包实现 wait 相关逻辑。 |
| `pkg/wkcache/stream.go` | 位于 pkg/wkcache 的模块实现。导入/依赖: 外部 go.uber.org/atomic 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: MessageChunk, StreamMeta, StreamMetaBuilder, StreamData, StreamCache, StreamCacheOptions, NewStreamMeta, NewStreamMetaBuilder 等 29 项；关键函数/方法: NewStreamMeta, NewStreamMetaBuilder, NewStreamCache, (*MessageChunk).Size, (*StreamMeta).SetCustomField 等 47 项；用于 该包实现 stream 相关逻辑。 |
| `pkg/wkdb/allowlist.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key；导出: 无；关键函数/方法: (*wukongDB).AddAllowlist, (*wukongDB).GetAllowlist, (*wukongDB).HasAllowlist, (*wukongDB).ExistAllowlist, (*wukongDB).RemoveAllowlist, (*wukongDB).RemoveAllAllowlist, (*wukongDB).removeAllowlist, (*wukongDB).getAllowlistByUids 等 13 项；用于 该包实现 allowlist 相关逻辑。 |
| `pkg/wkdb/cache_channel.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: ChannelInfoCache, ChannelInfoCacheItem, NewChannelInfoCache；关键函数/方法: NewChannelInfoCache, (*ChannelInfoCacheItem).IsExpired, (*ChannelInfoCache).GetChannelInfo, (*ChannelInfoCache).SetChannelInfo, (*ChannelInfoCache).UpdateChannelInfo 等 18 项；用于 该包实现 cache_channel 相关逻辑。 |
| `pkg/wkdb/cache_channel_cluster_config.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: ChannelClusterConfigCache, ChannelClusterConfigCacheItem, NewChannelClusterConfigCache；关键函数/方法: NewChannelClusterConfigCache, (*ChannelClusterConfigCacheItem).IsExpired, (*ChannelClusterConfigCache).GetChannelClusterConfig 等 23 项；用于 该包实现 cache_channel_cluster_config 相关逻辑。 |
| `pkg/wkdb/cache_channel_seq.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkutil；导出: 无；关键函数/方法: (*channelSeqCache).getChannelLastSeq, (*channelSeqCache).setChannelLastSeq, (*channelSeqCache).setChannelLastSeqWithBytes, (*channelSeqCache).invalidateChannelLastSeq, (*channelSeqCache).getChannelKey；用于 该包实现 cache_channel_seq 相关逻辑。 |
| `pkg/wkdb/cache_conversation.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: ConversationCache, LastConversationsResult, NewConversationCache；关键函数/方法: NewConversationCache, (*LastConversationsResult).IsExpired, (*ConversationCache).GetLastConversations, (*ConversationCache).SetLastConversations 等 16 项；用于 该包实现 cache_conversation 相关逻辑。 |
| `pkg/wkdb/cache_device.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: DeviceCache, DeviceCacheItem, NewDeviceCache；关键函数/方法: NewDeviceCache, (*DeviceCacheItem).IsExpired, (*DeviceCache).GetDevice, (*DeviceCache).SetDevice, (*DeviceCache).InvalidateDevice, (*DeviceCache).InvalidateUserDevices 等 25 项；用于 该包实现 cache_device 相关逻辑。 |
| `pkg/wkdb/cache_manager.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: CacheManager, CacheWarmupData, NewCacheManager；关键函数/方法: NewCacheManager, (*CacheManager).Start, (*CacheManager).Stop, (*CacheManager).SetCleanupInterval, (*CacheManager).ForceCleanup, (*CacheManager).GetCacheStats, (*CacheManager).GetTotalCacheSize 等 15 项；用于 该包实现 cache_manager 相关逻辑。 |
| `pkg/wkdb/cache_permission.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: PermissionType, PermissionCache, PermissionCacheItem, NewPermissionCache, PermissionTypeDenylist, PermissionTypeSubscriber 等 8 项；关键函数/方法: NewPermissionCache, (*PermissionCacheItem).IsExpired, (*PermissionCache).GetDenylistExists 等 26 项；用于 该包实现 cache_permission 相关逻辑。 |
| `pkg/wkdb/cache_user_last_msg_seq.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/hashicorp/golang-lru/v2，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, strings；导出: 无；关键函数/方法: (*userLastMsgSeqCache).get, (*userLastMsgSeqCache).set, (*userLastMsgSeqCache).updateIfGreater, (*userLastMsgSeqCache).invalidate, (*userLastMsgSeqCache).makeKey；用于 该包实现 cache_user_last_msg_seq 相关逻辑。 |
| `pkg/wkdb/channel.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key 等 2 项；导出: 无；关键函数/方法: (*wukongDB).AddChannel, (*wukongDB).UpdateChannel, (*wukongDB).GetChannel, (*wukongDB).SearchChannels, (*wukongDB).ExistChannel, (*wukongDB).DeleteChannel, (*wukongDB).UpdateChannelAppliedIndex, (*wukongDB).GetChannelAppliedIndex 等 15 项；用于 该包实现 channel 相关逻辑。 |
| `pkg/wkdb/channel_cluster_config.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key；导出: 无；关键函数/方法: (*wukongDB).SaveChannelClusterConfig, (*wukongDB).SaveChannelClusterConfigs, (*wukongDB).GetChannelClusterConfig, (*wukongDB).GetChannelClusterConfigVersion, (*wukongDB).GetChannelClusterConfigs 等 13 项；用于 该包实现 channel_cluster_config 相关逻辑。 |
| `pkg/wkdb/conversation.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key 等 2 项；导出: 无；关键函数/方法: (*wukongDB).AddOrUpdateConversations, (*wukongDB).AddOrUpdateConversationsBatchIfNotExist, (*wukongDB).AddOrUpdateConversationsWithUser, (*wukongDB).UpdateConversationDeletedAtMsgSeq, (*wukongDB).UpdateConversationIfSeqGreaterAsync 等 30 项；用于 该包实现 conversation 相关逻辑。 |
| `pkg/wkdb/db.go` | 位于 pkg/wkdb 的类型/常量定义。导入/依赖: 无（无 import）；导出: DB, MessageDB, BatchMsgRequest, BatchMsgResponse, DeviceDB, UserDB, ChannelDB, ConversationDB 等 22 项；关键函数/方法: 无；用于 该包实现 db 相关逻辑。 |
| `pkg/wkdb/denylist.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 math, time；导出: 无；关键函数/方法: (*wukongDB).AddDenylist, (*wukongDB).GetDenylist, (*wukongDB).ExistDenylist, (*wukongDB).RemoveDenylist, (*wukongDB).RemoveAllDenylist, (*wukongDB).removeDenylist, (*wukongDB).getDenylistByUids, (*wukongDB).writeDenylist 等 12 项；用于 该包实现 denylist 相关逻辑。 |
| `pkg/wkdb/device.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 math, sort 等 3 项；导出: 无；关键函数/方法: (*wukongDB).GetDevice, (*wukongDB).GetDevices, (*wukongDB).GetDeviceCount, (*wukongDB).AddDevice, (*wukongDB).UpdateDevice, (*wukongDB).SearchDevice, (*wukongDB).getDeviceId, (*wukongDB).getDeviceById 等 12 项；用于 该包实现 device 相关逻辑。 |
| `pkg/wkdb/errors.go` | 位于 pkg/wkdb 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrNotFound, ErrInvalidUserId, ErrInvalidDeviceId, ErrAlreadyExist；关键函数/方法: 无；用于 该包实现 errors 相关逻辑。 |
| `pkg/wkdb/key/key.go` | 位于 pkg/wkdb/key 的模块实现。导入/依赖: 无（无 import）；导出: NewMessageColumnKey, NewMessageColumnKeyWithPrimary, NewMessagePrimaryKey, NewMessageLowKey, NewMessageHighKey, NewMessageSearchLowKeWith, NewMessageSearchHighKeWith, NewChannelLastMessageSeqKey 等 86 项；关键函数/方法: NewMessageColumnKey, NewMessageColumnKeyWithPrimary, NewMessagePrimaryKey, NewMessageLowKey, NewMessageHighKey 等 84 项；用于 该包实现 key 相关逻辑。 |
| `pkg/wkdb/key/table.go` | 位于 pkg/wkdb/key 的类型/常量定义。导入/依赖: 无（无 import）；导出: TableMessage, TableUser, TableDevice, TableSubscriber, TableSubscriberChannelRelation, TableChannelInfo, TableDenylist, TableAllowlist 等 22 项；关键函数/方法: 无；用于 该包实现 table 相关逻辑。 |
| `pkg/wkdb/leader_term_sequence.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 math；导出: 无；关键函数/方法: (*wukongDB).SetLeaderTermStartIndex, (*wukongDB).LeaderLastTerm, (*wukongDB).LeaderTermStartIndex, (*wukongDB).LeaderLastTermGreaterEqThan, (*wukongDB).DeleteLeaderTermStartIndexGreaterThanTerm；用于 该包实现 leader_term_sequence 相关逻辑。 |
| `pkg/wkdb/lock.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/keylock，标准库 strconv, strings；导出: 无；关键函数/方法: (*dblock).start, (*dblock).stop, (*channelClusterConfigLock).lockByChannel, (*channelClusterConfigLock).unlockByChannel, (*subscriberCountLock).lock, (*subscriberCountLock).unlock, (*allowlistCountLock).lock, (*allowlistCountLock).unlock 等 26 项；用于 该包实现 lock 相关逻辑。 |
| `pkg/wkdb/message.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key 等 2 项；导出: 无；关键函数/方法: (*wukongDB).AppendMessages, (*wukongDB).GetMessage, (*wukongDB).LoadPrevRangeMsgs, (*wukongDB).LoadNextRangeMsgs, (*wukongDB).LoadMsg, (*wukongDB).LoadLastMsgs, (*wukongDB).GetLastMsg, (*wukongDB).LoadLastMsgsWithEnd 等 30 项；用于 该包实现 message 相关逻辑。 |
| `pkg/wkdb/message_notify_queue.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key；导出: 无；关键函数/方法: (*wukongDB).AppendMessageOfNotifyQueue, (*wukongDB).GetMessagesOfNotifyQueue, (*wukongDB).RemoveMessagesOfNotifyQueueCount, (*wukongDB).RemoveMessagesOfNotifyQueue, (*wukongDB).writeMessageOfNotifyQueue, (*wukongDB).parseMessageOfNotifyQueue；用于 该包实现 message_notify_queue 相关逻辑。 |
| `pkg/wkdb/model.go` | 位于 pkg/wkdb 的模型定义。导入/依赖: 内部 github.com/WuKongIM/WuKongIMGoProto，标准库 fmt, strconv 等 4 项；导出: Message, Device, User, ChannelInfo, SessionType, Session, ConversationType, Conversation 等 47 项；关键函数/方法: IsEmptyMessage, IsEmptyDevice, IsEmptyUser, NewChannelInfo, IsEmptyChannelInfo, IsEmptyConversation, IsEmptySession, IsEmptyChannelClusterConfig 等 30 项；用于 该包实现 model 相关逻辑。 |
| `pkg/wkdb/options.go` | 位于 pkg/wkdb 的配置/选项定义。导入/依赖: 无（无 import）；导出: Options, Option, NewOptions, WithDir, WithNodeId, WithSlotCount, WithConversationLimit, WithEnableCost 等 10 项；关键函数/方法: NewOptions, WithDir, WithNodeId, WithSlotCount, WithConversationLimit, WithEnableCost, WithShardNum, WithMemTableSize；用于 该包实现 options 相关逻辑。 |
| `pkg/wkdb/performance_analyzer.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: PerformanceAnalyzer, NewPerformanceAnalyzer；关键函数/方法: NewPerformanceAnalyzer, (*PerformanceAnalyzer).AnalyzeCommonBottlenecks, (*PerformanceAnalyzer).GeneratePerformanceReport, (*PerformanceAnalyzer).StartPerformanceMonitoring 等 10 项；用于 该包实现 performance_analyzer 相关逻辑。 |
| `pkg/wkdb/performance_monitor.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: PerformanceMonitor, MethodStats, CacheStats, SystemStats, MethodTimer, NewPerformanceMonitor；关键函数/方法: NewPerformanceMonitor, (*PerformanceMonitor).RecordMethodCall, (*PerformanceMonitor).RecordCacheHit, (*PerformanceMonitor).RecordCacheMiss 等 14 项；用于 该包实现 performance_monitor 相关逻辑。 |
| `pkg/wkdb/plugin.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 encoding/binary, encoding/json 等 4 项；导出: 无；关键函数/方法: (*wukongDB).AddOrUpdatePlugin, (*wukongDB).DeletePlugin, (*wukongDB).GetPlugins, (*wukongDB).GetPlugin, (*wukongDB).UpdatePluginConfig, (*wukongDB).GetPluginConfig, (*wukongDB).writePlugin, (*wukongDB).iteratorPlugin；用于 该包实现 plugin 相关逻辑。 |
| `pkg/wkdb/plugin_user.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key；导出: 无；关键函数/方法: (*wukongDB).AddOrUpdatePluginUsers, (*wukongDB).RemovePluginUser, (*wukongDB).GetPluginUsers, (*wukongDB).SearchPluginUsers, (*wukongDB).GetHighestPriorityPluginByUid, (*wukongDB).ExistPluginByUid, (*wukongDB).getPluginId 等 12 项；用于 该包实现 plugin_user 相关逻辑。 |
| `pkg/wkdb/shardb.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 无（无 import）；导出: 无；关键函数/方法: 无；用于 该包实现 shardb 相关逻辑。 |
| `pkg/wkdb/stream.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key, github.com/WuKongIM/WuKongIMGoProto，标准库 math；导出: StreamMeta, Stream；关键函数/方法: (*wukongDB).AddStreamMeta, (*wukongDB).GetStreamMeta, (*wukongDB).AddStream, (*wukongDB).AddStreams, (*wukongDB).GetStreams, (*StreamMeta).Encode, (*StreamMeta).Decode, (*Stream).Encode 等 9 项；用于 该包实现 stream 相关逻辑。 |
| `pkg/wkdb/streamv2.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key；导出: StreamV2；关键函数/方法: (*wukongDB).SaveStreamV2, (*wukongDB).GetStreamV2, (*wukongDB).GetStreamV2s；用于 该包实现 streamv2 相关逻辑。 |
| `pkg/wkdb/subscriber.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble 等 2 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key 等 2 项；导出: 无；关键函数/方法: (*wukongDB).AddSubscribers, (*wukongDB).GetSubscribers, (*wukongDB).GetSubscriberCount, (*wukongDB).RemoveSubscribers, (*wukongDB).ExistSubscriber, (*wukongDB).RemoveAllSubscriber, (*wukongDB).removeSubscriber 等 12 项；用于 该包实现 subscriber 相关逻辑。 |
| `pkg/wkdb/systemuid.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 math；导出: 无；关键函数/方法: (*wukongDB).AddSystemUids, (*wukongDB).RemoveSystemUids, (*wukongDB).GetSystemUids, (*wukongDB).writeSystemUid, (*wukongDB).removeSystemUid, (*wukongDB).parseSystemUid；用于 该包实现 systemuid 相关逻辑。 |
| `pkg/wkdb/tester.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 math, time；导出: 无；关键函数/方法: (*wukongDB).AddOrUpdateTester, (*wukongDB).GetTester, (*wukongDB).GetTesters, (*wukongDB).RemoveTester, (*wukongDB).writeTester, (*wukongDB).iteratorTester；用于 该包实现 tester 相关逻辑。 |
| `pkg/wkdb/total.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key；导出: 无；关键函数/方法: (*wukongDB).IncMessageCount, (*wukongDB).IncUserCount, (*wukongDB).IncDeviceCount, (*wukongDB).IncSessionCount, (*wukongDB).IncChannelCount, (*wukongDB).IncConversationCount, (*wukongDB).GetTotalMessageCount, (*wukongDB).GetTotalUserCount 等 14 项；用于 该包实现 total 相关逻辑。 |
| `pkg/wkdb/user.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/cockroachdb/pebble，内部 github.com/WuKongIM/WuKongIM/pkg/wkdb/key，标准库 math, sort 等 4 项；导出: 无；关键函数/方法: (*wukongDB).GetUser, (*wukongDB).ExistUser, (*wukongDB).SearchUser, (*wukongDB).AddUser, (*wukongDB).UpdateUser, (*wukongDB).existUser, (*wukongDB).getUserId, (*wukongDB).writeUser 等 11 项；用于 该包实现 user 相关逻辑。 |
| `pkg/wkdb/wukongdb.go` | 位于 pkg/wkdb 的模块实现。导入/依赖: 外部 github.com/bwmarrin/snowflake, github.com/cockroachdb/pebble 等 5 项，内部 github.com/WuKongIM/WuKongIM/pkg/trace 等 4 项；导出: BatchDB, Batch, NewWukongDB, Commits, NewBatchDB；关键函数/方法: NewWukongDB, Commits, NewBatchDB, (*wukongDB).Open, (*wukongDB).Close, (*wukongDB).GetShardNum, (*wukongDB).GetChannelShardIndex, (*wukongDB).NextPrimaryKey 等 34 项；用于 该包实现 wukongdb 相关逻辑。 |
| `pkg/wkhook/webhook.pb.go` | 位于 pkg/wkhook 的模块实现。导入/依赖: 外部 google.golang.org/protobuf/reflect/protoreflect 等 2 项；导出: EventStatus, EventReq, EventResp, EventStatus_Error, EventStatus_Success, EventStatus_name, EventStatus_value, File_pkg_wkhook_webhook_proto；关键函数/方法: (EventStatus).Enum, (EventStatus).String, (EventStatus).Descriptor, (EventStatus).Type, (EventStatus).Number 等 21 项；用于 该包实现 webhook.pb 相关逻辑。 |
| `pkg/wkhook/webhook.proto` | 位于 pkg/wkhook 的Protobuf 协议定义。导入/依赖: 无（无 import）；导出: EventReq, EventResp, EventStatus, WebhookService；关键函数/方法: SendWebhook；用于 定义 wkhook 包的消息结构与服务接口。 |
| `pkg/wkhook/webhook_grpc.pb.go` | 位于 pkg/wkhook 的模块实现。导入/依赖: 外部 google.golang.org/grpc 等 3 项；导出: WebhookServiceClient, WebhookServiceServer, UnimplementedWebhookServiceServer, UnsafeWebhookServiceServer, NewWebhookServiceClient, RegisterWebhookServiceServer, WebhookService_ServiceDesc；关键函数/方法: NewWebhookServiceClient, RegisterWebhookServiceServer, (*webhookServiceClient).SendWebhook 等 5 项；用于 该包实现 webhook_grpc.pb 相关逻辑。 |
| `pkg/wkhttp/http.go` | 位于 pkg/wkhttp 的模块实现。导入/依赖: 外部 github.com/gin-gonic/gin, github.com/sendgrid/rest，标准库 io, net/http 等 4 项；导出: WKHttp, Context, HandlerFunc, New, NewWithLogger, CORSMiddleware；关键函数/方法: New, NewWithLogger, CORSMiddleware, (*WKHttp).GetGinRoute, (*WKHttp).Static, (*WKHttp).Use, (*Context).ResponseError, (*Context).ResponseErrorWithStatus 等 27 项；用于 该包实现 http 相关逻辑。 |
| `pkg/wkhttp/logger.go` | 位于 pkg/wkhttp 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, time；导出: LoggerWithWklog；关键函数/方法: LoggerWithWklog；用于 该包实现 logger 相关逻辑。 |
| `pkg/wklog/logger.go` | 位于 pkg/wklog 的模块实现。导入/依赖: 外部 go.uber.org/zap, go.uber.org/zap/zapcore 等 3 项，标准库 fmt, os 等 5 项；导出: Log, WKLog, Configure, Level, Info, Trace, Debug, Error 等 14 项；关键函数/方法: Configure, Level, Info, Trace, Debug, Error, Fatal, Panic 等 21 项；用于 该包实现 logger 相关逻辑。 |
| `pkg/wklog/options.go` | 位于 pkg/wklog 的配置/选项定义。导入/依赖: 外部 go.uber.org/zap/zapcore；导出: Options, NewOptions；关键函数/方法: NewOptions；用于 该包实现 options 相关逻辑。 |
| `pkg/wknet/acceptor.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sys/unix，内部 github.com/WuKongIM/WuKongIM/pkg/errors, github.com/WuKongIM/WuKongIM/pkg/wklog 等 4 项；导出: 无；关键函数/方法: (*acceptor).Start, (*acceptor).Stop, (*acceptor).start, (*acceptor).initTCPListener, (*acceptor).initWSListener, (*acceptor).initWSSListener, (*acceptor).acceptConn, (*acceptor).reactorSubByConnFd 等 11 项；用于 该包实现 acceptor 相关逻辑。 |
| `pkg/wknet/acceptor_windows.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 net, strings 等 3 项；导出: Acceptor, NewAcceptor；关键函数/方法: NewAcceptor, (*Acceptor).Start, (*Acceptor).Stop, (*Acceptor).tcpRealAddr, (*Acceptor).wsRealAddr, (*Acceptor).wssRealAddr, (*Acceptor).start, (*Acceptor).initTCPListener 等 12 项；用于 该包实现 acceptor_windows 相关逻辑。 |
| `pkg/wknet/buffer.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 无（无 import）；导出: Buffer, InboundBuffer, OutboundBuffer, DefualtBuffer, NewDefaultBuffer；关键函数/方法: NewDefaultBuffer, (*DefualtBuffer).IsEmpty, (*DefualtBuffer).Write, (*DefualtBuffer).Read, (*DefualtBuffer).BoundBufferSize, (*DefualtBuffer).Peek, (*DefualtBuffer).PeekBytes, (*DefualtBuffer).Discard 等 9 项；用于 该包实现 buffer 相关逻辑。 |
| `pkg/wknet/conn.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel 等 5 项，内部 github.com/WuKongIM/WuKongIM/pkg/ring 等 2 项；导出: ConnStats, Conn, IWSConn, DefaultConn, TLSConn, NewConnStats, GetDefaultConn, CreateConn；关键函数/方法: NewConnStats, GetDefaultConn, CreateConn, (*DefaultConn).ID, (*DefaultConn).SetID, (*DefaultConn).ReadToInboundBuffer, (*DefaultConn).KeepLastActivity 等 93 项；用于 该包实现 conn 相关逻辑。 |
| `pkg/wknet/const.go` | 位于 pkg/wknet 的类型/常量定义。导入/依赖: 标准库 errors；导出: ErrUnsupportedOp；关键函数/方法: 无；用于 该包实现 const 相关逻辑。 |
| `pkg/wknet/engine.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel, github.com/sasha-s/go-deadlock 等 3 项，标准库 net, sync 等 3 项；导出: Engine, NewEngine；关键函数/方法: NewEngine, (*Engine).Start, (*Engine).Stop, (*Engine).AddConn, (*Engine).RemoveConn, (*Engine).GetConn, (*Engine).GetAllConn, (*Engine).Iterator 等 21 项；用于 该包实现 engine 相关逻辑。 |
| `pkg/wknet/event.go` | 位于 pkg/wknet 的事件处理/事件定义。导入/依赖: 标准库 net；导出: OnConnect, OnData, OnClose, OnNewConn, OnNewInboundConn, OnNewOutboundConn, EventHandler, NewEventHandler；关键函数/方法: NewEventHandler；用于 该包实现 event 相关逻辑。 |
| `pkg/wknet/io/io_bsd.go` | 位于 pkg/wknet/io 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 unsafe；导出: Writev, Readv；关键函数/方法: Writev, Readv；用于 该包实现 io_bsd 相关逻辑。 |
| `pkg/wknet/io/io_linux.go` | 位于 pkg/wknet/io 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix；导出: Writev, Readv；关键函数/方法: Writev, Readv；用于 该包实现 io_linux 相关逻辑。 |
| `pkg/wknet/listener.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/errors, github.com/WuKongIM/WuKongIM/pkg/wknet/socket，标准库 errors, fmt 等 5 项；导出: 无；关键函数/方法: (*listener).Close, (*listener).init, (*listener).initTCPListener, (*listener).parseAddr；用于 该包实现 listener 相关逻辑。 |
| `pkg/wknet/listener_windows.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 go.uber.org/zap, golang.org/x/sys/windows，内部 github.com/WuKongIM/WuKongIM/pkg/errors, github.com/WuKongIM/WuKongIM/pkg/wklog；导出: PollEvent, PollEventUnknown, PollEventAccept, PollEventRead, PollEventWrite, PollEventClose；关键函数/方法: (*listener).Polling, (*listener).Close, (*listener).init, (*listener).initTCPListener, (*listener).parseAddr；用于 该包实现 listener_windows 相关逻辑。 |
| `pkg/wknet/net_fd.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix；导出: NetFd；关键函数/方法: (NetFd).Read, (NetFd).Write, (NetFd).Close, (NetFd).Fd；用于 该包实现 net_fd 相关逻辑。 |
| `pkg/wknet/net_fd_windows.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 golang.org/x/sys/windows，标准库 errors, net 等 3 项；导出: NetFd；关键函数/方法: (NetFd).Read, (NetFd).Write, (NetFd).Close, (NetFd).Fd；用于 该包实现 net_fd_windows 相关逻辑。 |
| `pkg/wknet/netpoll/const.go` | 位于 pkg/wknet/netpoll 的类型/常量定义。导入/依赖: 无（无 import）；导出: PollEvent, PollEventUnknown, PollEventRead, PollEventWrite, PollEventClose；关键函数/方法: 无；用于 该包实现 const 相关逻辑。 |
| `pkg/wknet/netpoll/epoll_default_poller.go` | 位于 pkg/wknet/netpoll 的模块实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, os 等 3 项；导出: Poller, NewPoller；关键函数/方法: NewPoller, (*Poller).Polling, (*Poller).AddRead, (*Poller).AddWrite, (*Poller).DeleteRead, (*Poller).DeleteWrite, (*Poller).DeleteReadAndWrite, (*Poller).Delete 等 9 项；用于 该包实现 epoll_default_poller 相关逻辑。 |
| `pkg/wknet/netpoll/epoll_events.go` | 位于 pkg/wknet/netpoll 的事件处理/事件定义。导入/依赖: 外部 golang.org/x/sys/unix；导出: IOEvent, InitPollEventsCap, MaxPollEventsCap, MinPollEventsCap, MaxAsyncTasksAtOneTime, ErrEvents, OutEvents, InEvents；关键函数/方法: (*eventList).expand, (*eventList).shrink；用于 该包实现 epoll_events 相关逻辑。 |
| `pkg/wknet/netpoll/kqueue_default_poller.go` | 位于 pkg/wknet/netpoll 的模块实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 fmt, os 等 4 项；导出: Poller, NewPoller；关键函数/方法: NewPoller, (*Poller).Polling, (*Poller).AddRead, (*Poller).AddWrite, (*Poller).DeleteRead, (*Poller).DeleteWrite, (*Poller).DeleteReadAndWrite, (*Poller).Delete 等 11 项；用于 该包实现 kqueue_default_poller 相关逻辑。 |
| `pkg/wknet/netpoll/kqueue_events.go` | 位于 pkg/wknet/netpoll 的事件处理/事件定义。导入/依赖: 外部 golang.org/x/sys/unix；导出: IOEvent, InitPollEventsCap, MaxPollEventsCap, MinPollEventsCap, MaxAsyncTasksAtOneTime；关键函数/方法: (*eventList).expand, (*eventList).shrink；用于 该包实现 kqueue_events 相关逻辑。 |
| `pkg/wknet/netpoll/sys_epoll_linux.go` | 位于 pkg/wknet/netpoll 的模块实现。导入/依赖: 标准库 syscall, unsafe；导出: EpollCreate, EpollCtl, EpollWait, EPOLLET；关键函数/方法: EpollCreate, EpollCtl, EpollWait；用于 该包实现 sys_epoll_linux 相关逻辑。 |
| `pkg/wknet/netpoll/sys_epoll_linux_arm64.go` | 位于 pkg/wknet/netpoll 的模块实现。导入/依赖: 标准库 syscall, unsafe；导出: EpollCreate, EpollCtl, EpollWait, EPOLLET；关键函数/方法: EpollCreate, EpollCtl, EpollWait；用于 该包实现 sys_epoll_linux_arm64 相关逻辑。 |
| `pkg/wknet/netpoll/sys_epoll_linux_loong64.go` | 位于 pkg/wknet/netpoll 的模块实现。导入/依赖: 标准库 syscall, unsafe；导出: EpollCreate, EpollCtl, EpollWait, EPOLLET；关键函数/方法: EpollCreate, EpollCtl, EpollWait；用于 该包实现 sys_epoll_linux_loong64 相关逻辑。 |
| `pkg/wknet/options.go` | 位于 pkg/wknet 的配置/选项定义。导入/依赖: 外部 github.com/WuKongIM/crypto/tls，标准库 runtime, time；导出: Mode, Options, Option, NewOptions, WithAddr, WithWSAddr, WithWSSAddr, WithTCPTLSConfig 等 16 项；关键函数/方法: NewOptions, WithAddr, WithWSAddr, WithWSSAddr, WithTCPTLSConfig, WithWSTLSConfig, WithMaxOpenFiles, WithSubReactorNum 等 13 项；用于 该包实现 options 相关逻辑。 |
| `pkg/wknet/reactor_main.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/wklog；导出: ReactorMain, NewReactorMain；关键函数/方法: NewReactorMain, (*ReactorMain).Start, (*ReactorMain).Stop；用于 该包实现 reactor_main 相关逻辑。 |
| `pkg/wknet/reactor_sub.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 2 项；导出: ReactorSub, NewReactorSub；关键函数/方法: NewReactorSub, (*ReactorSub).AddConn, (*ReactorSub).Start, (*ReactorSub).Stop, (*ReactorSub).AddWrite, (*ReactorSub).AddRead, (*ReactorSub).RemoveWrite, (*ReactorSub).RemoveRead 等 16 项；用于 该包实现 reactor_sub 相关逻辑。 |
| `pkg/wknet/reactor_sub_windows.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 bytes, fmt 等 4 项；导出: ReactorSub, NewReactorSub；关键函数/方法: NewReactorSub, (*ReactorSub).Start, (*ReactorSub).Stop, (*ReactorSub).DeleteFd, (*ReactorSub).ConnInc, (*ReactorSub).ConnDec, (*ReactorSub).AddConn, (*ReactorSub).CloseConn 等 13 项；用于 该包实现 reactor_sub_windows 相关逻辑。 |
| `pkg/wknet/ring_buffer.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/pool/ringbuffer, github.com/WuKongIM/WuKongIM/pkg/ring，标准库 io；导出: RingBuffer；关键函数/方法: (*RingBuffer).Done, (*RingBuffer).Peek, (*RingBuffer).Discard, (*RingBuffer).Read, (*RingBuffer).ReadByte, (*RingBuffer).Write, (*RingBuffer).WriteByte, (*RingBuffer).Buffered 等 20 项；用于 该包实现 ring_buffer 相关逻辑。 |
| `pkg/wknet/socket/sock_bsd.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 runtime；导出: 无；关键函数/方法: maxListenerBacklog；用于 该包实现 sock_bsd 相关逻辑。 |
| `pkg/wknet/socket/sock_cloexec.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix；导出: 无；关键函数/方法: sysSocket；用于 该包实现 sock_cloexec 相关逻辑。 |
| `pkg/wknet/socket/sock_linux.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 bufio, os 等 4 项；导出: 无；关键函数/方法: maxListenerBacklog；用于 该包实现 sock_linux 相关逻辑。 |
| `pkg/wknet/socket/sock_posix.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 标准库 net, syscall；导出: 无；关键函数/方法: ipToSockaddrInet4, ipToSockaddrInet6, ipToSockaddr；用于 该包实现 sock_posix 相关逻辑。 |
| `pkg/wknet/socket/socket.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 标准库 net；导出: Option, TCPSocket, UDPSocket, UnixSocket；关键函数/方法: TCPSocket, UDPSocket, UnixSocket；用于 该包实现 socket 相关逻辑；注释目标: Package socket provides functions that return fd and net.Addr based on given the protocol and address with a SO_REUSEPO…。 |
| `pkg/wknet/socket/sockopts_darwin.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 errors, os；导出: SetKeepAlivePeriod；关键函数/方法: SetKeepAlivePeriod；用于 该包实现 sockopts_darwin 相关逻辑。 |
| `pkg/wknet/socket/sockopts_posix.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，内部 github.com/WuKongIM/WuKongIM/pkg/errors；导出: SetNoDelay, SetRecvBuffer, SetSendBuffer, SetReuseport, SetReuseAddr, SetIPv6Only, SetLinger, SetMulticastMembership 等 10 项；关键函数/方法: SetNoDelay, SetRecvBuffer, SetSendBuffer, SetReuseport, SetReuseAddr, SetIPv6Only, SetLinger, SetMulticastMembership 等 10 项；用于 该包实现 sockopts_posix 相关逻辑。 |
| `pkg/wknet/socket/sockopts_unix.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 errors, os；导出: SetKeepAlivePeriod；关键函数/方法: SetKeepAlivePeriod；用于 该包实现 sockopts_unix 相关逻辑。 |
| `pkg/wknet/socket/socktoaddr.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，内部 github.com/WuKongIM/WuKongIM/pkg/pool/byteslice，标准库 net, unsafe；导出: SockaddrToTCPOrUnixAddr, SockaddrToUDPAddr, BytesToString；关键函数/方法: SockaddrToTCPOrUnixAddr, SockaddrToUDPAddr, BytesToString；用于 该包实现 socktoaddr 相关逻辑。 |
| `pkg/wknet/socket/sys_cloexec.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，标准库 syscall；导出: 无；关键函数/方法: sysSocket；用于 该包实现 sys_cloexec 相关逻辑。 |
| `pkg/wknet/socket/tcp_socket.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/errors，标准库 net, os 等 3 项；导出: GetTCPSockAddr；关键函数/方法: GetTCPSockAddr；用于 该包实现 tcp_socket 相关逻辑。 |
| `pkg/wknet/socket/udp_socket.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，内部 github.com/WuKongIM/WuKongIM/pkg/errors，标准库 net, os 等 3 项；导出: GetUDPSockAddr；关键函数/方法: GetUDPSockAddr；用于 该包实现 udp_socket 相关逻辑。 |
| `pkg/wknet/socket/unix_socket.go` | 位于 pkg/wknet/socket 的模块实现。导入/依赖: 外部 golang.org/x/sys/unix，内部 github.com/WuKongIM/WuKongIM/pkg/errors，标准库 net, os；导出: GetUnixSockAddr；关键函数/方法: GetUnixSockAddr；用于 该包实现 unix_socket 相关逻辑。 |
| `pkg/wknet/utils.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 标准库 syscall；导出: GetMaxOpenFiles；关键函数/方法: GetMaxOpenFiles；用于 该包实现 utils 相关逻辑。 |
| `pkg/wknet/utils_windows.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 无（无 import）；导出: GetMaxOpenFiles；关键函数/方法: GetMaxOpenFiles；用于 该包实现 utils_windows 相关逻辑。 |
| `pkg/wknet/websocket.go` | 位于 pkg/wknet 的模块实现。导入/依赖: 外部 github.com/WuKongIM/crypto/tls, go.uber.org/zap 等 4 项，内部 github.com/WuKongIM/WuKongIM/pkg/wkutil；导出: WSConn, WSSConn, CreateWSConn, CreateWSSConn, NewWSConn, NewWSSConn；关键函数/方法: CreateWSConn, CreateWSSConn, NewWSConn, NewWSSConn, (*WSConn).ReadToInboundBuffer, (*WSConn).WriteServerBinary, (*WSConn).WriteServerText, (*WSConn).PeekFromTemp 等 24 项；用于 该包实现 websocket 相关逻辑。 |
| `pkg/wkserver/client/client.go` | 位于 pkg/wkserver/client 的客户端实现。导入/依赖: 外部 go.uber.org/atomic, github.com/panjf2000/ants/v2 等 5 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkserver/proto，标准库 context, errors 等 5 项；导出: Client, New；关键函数/方法: New, (*Client).Options, (*Client).Start, (*Client).Stop, (*Client).Write, (*Client).Route, (*Client).IsAuthed, (*Client).Send 等 17 项；用于 该包实现 client 相关逻辑。 |
| `pkg/wkserver/client/conn.go` | 位于 pkg/wkserver/client 的模块实现。导入/依赖: 外部 github.com/panjf2000/gnet/v2, github.com/panjf2000/gnet/v2/pkg/errors 等 4 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkserver/proto 等 3 项；导出: 无；关键函数/方法: (*conn).asyncWrite, (*conn).startDial, (*conn).startAuth, (*conn).sendAuth, (*conn).tick, (*conn).reconnect, (*conn).sendHeartbeat, (*conn).close 等 9 项；用于 该包实现 conn 相关逻辑。 |
| `pkg/wkserver/client/context.go` | 位于 pkg/wkserver/client 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkserver/proto；导出: Handler, Context, NewContext；关键函数/方法: NewContext, (*Context).Write, (*Context).Body, (*Context).WriteOk, (*Context).WriteErr, (*Context).WriteErrorAndStatus；用于 该包实现 context 相关逻辑。 |
| `pkg/wkserver/client/event.go` | 位于 pkg/wkserver/client 的事件处理/事件定义。导入/依赖: 外部 github.com/panjf2000/gnet/v2，标准库 time；导出: 无；关键函数/方法: (*clientEvent).OnTick, (*clientEvent).OnClose, (*clientEvent).OnTraffic, (*clientEvent).OnShutdown, (*clientEvent).OnBoot, (*clientEvent).OnOpen；用于 该包实现 event 相关逻辑。 |
| `pkg/wkserver/client/options.go` | 位于 pkg/wkserver/client 的配置/选项定义。导入/依赖: 无（无 import）；导出: Options, Option, NewOptions, WithUid, WithToken；关键函数/方法: NewOptions, WithUid, WithToken；用于 该包实现 options 相关逻辑。 |
| `pkg/wkserver/conn_context.go` | 位于 pkg/wkserver 的模块实现。导入/依赖: 外部 go.uber.org/atomic；导出: 无；关键函数/方法: newConnContext；用于 该包实现 conn_context 相关逻辑。 |
| `pkg/wkserver/conn_manager.go` | 位于 pkg/wkserver 的模块实现。导入/依赖: 外部 github.com/panjf2000/gnet/v2，标准库 sync；导出: ConnManager, NewConnManager；关键函数/方法: NewConnManager, (*ConnManager).AddConn, (*ConnManager).GetConn, (*ConnManager).RemoveConn；用于 该包实现 conn_manager 相关逻辑。 |
| `pkg/wkserver/message_queue.go` | 位于 pkg/wkserver 的模块实现。导入/依赖: 外部 github.com/panjf2000/gnet/v2, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkserver/proto；导出: 无；关键函数/方法: (*message).size, (*messageQueue).add, (*messageQueue).mustAdd, (*messageQueue).get, (*messageQueue).targetQueue, (*messageQueue).tryAdd, (*messageQueue).gc, (*messageQueue).notify 等 9 项；用于 该包实现 message_queue 相关逻辑。 |
| `pkg/wkserver/metrics.go` | 位于 pkg/wkserver 的模块实现。导入/依赖: 标准库 sync/atomic；导出: 无；关键函数/方法: (*metrics).recvMsgCountAdd, (*metrics).recvMsgCountSub, (*metrics).recvMsgBytesAdd, (*metrics).recvMsgBytesSub, (*metrics).sendMsgCountAdd, (*metrics).sendMsgCountSub, (*metrics).sendMsgBytesAdd, (*metrics).sendMsgBytesSub 等 9 项；用于 该包实现 metrics 相关逻辑。 |
| `pkg/wkserver/model.go` | 位于 pkg/wkserver 的模型定义。导入/依赖: 外部 github.com/panjf2000/gnet/v2, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 2 项；导出: Handler, Context, NewContext；关键函数/方法: NewContext, (*Context).WriteMessage, (*Context).Write, (*Context).WriteOk, (*Context).WriteErr, (*Context).WriteErrorAndStatus, (*Context).WriteStatus, (*Context).Body 等 11 项；用于 该包实现 model 相关逻辑。 |
| `pkg/wkserver/options.go` | 位于 pkg/wkserver 的配置/选项定义。导入/依赖: 外部 github.com/panjf2000/gnet/v2，内部 github.com/WuKongIM/WuKongIM/pkg/wkserver/proto；导出: Options, Option, NewOptions, WithRequestTimeout, WithRequestPoolSize, WithMessagePoolSize, WithMessagePoolOn, WithAddr 等 17 项；关键函数/方法: NewOptions, WithRequestTimeout, WithRequestPoolSize, WithMessagePoolSize, WithMessagePoolOn, WithAddr, WithConnPath 等 15 项；用于 该包实现 options 相关逻辑。 |
| `pkg/wkserver/proto/protocol.go` | 位于 pkg/wkserver/proto 的模块实现。导入/依赖: 外部 github.com/panjf2000/gnet/v2, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 bytes, encoding/binary 等 4 项；导出: MsgType, Protocol, DefaultProto, New, Unknown, MsgTypeConnect, MsgTypeConnack, MsgTypeRequest 等 16 项；关键函数/方法: New, (MsgType).Uint8, (MsgType).String, (*DefaultProto).Decode, (*DefaultProto).Encode；用于 该包实现 protocol 相关逻辑。 |
| `pkg/wkserver/proto/request.go` | 位于 pkg/wkserver/proto 的模块实现。导入/依赖: 标准库 encoding/binary, errors 等 3 项；导出: Status, Request, Response, Connect, Connack, Message, BatchMessage, IdSize 等 24 项；关键函数/方法: (*Request).Reset, (*Request).Marshal, (*Request).Unmarshal, (*Response).Marshal, (*Response).Unmarshal, (*Connect).Marshal, (*Connect).Unmarshal, (*Connack).Marshal 等 17 项；用于 该包实现 request 相关逻辑。 |
| `pkg/wkserver/rate.go` | 位于 pkg/wkserver 的模块实现。导入/依赖: 外部 go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 math, sync/atomic；导出: RateLimiter, NewRateLimiter；关键函数/方法: NewRateLimiter, (*RateLimiter).Enabled, (*RateLimiter).Increase, (*RateLimiter).Decrease, (*RateLimiter).Set, (*RateLimiter).Get, (*RateLimiter).RateLimited；用于 该包实现 rate 相关逻辑。 |
| `pkg/wkserver/server.go` | 位于 pkg/wkserver 的服务端实现。导入/依赖: 外部 github.com/RussellLuo/timingwheel, github.com/lni/goutils/syncutil 等 8 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog 等 2 项；导出: Server, New, GetUidFromContext, ParseProtoAddr；关键函数/方法: New, GetUidFromContext, ParseProtoAddr, (*Server).Start, (*Server).Stop, (*Server).Schedule, (*Server).Route, (*Server).OnMessage 等 12 项；用于 该包实现 server 相关逻辑。 |
| `pkg/wkserver/server_event.go` | 位于 pkg/wkserver 的事件处理/事件定义。导入/依赖: 外部 github.com/panjf2000/gnet/v2, go.uber.org/zap 等 3 项，内部 github.com/WuKongIM/WuKongIM/pkg/wklog, github.com/WuKongIM/WuKongIM/pkg/wkserver/proto；导出: 无；关键函数/方法: (*Server).OnTraffic, (*Server).Request, (*Server).RequestAsync, (*Server).Send, (*Server).OnBoot, (*Server).OnClose, (*Server).OnTick, (*Server).handleMsg 等 16 项；用于 该包实现 server_event 相关逻辑。 |
| `pkg/wkutil/aes.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 外部 github.com/valyala/bytebufferpool；导出: AesEncryptSimple, AesEncryptPkcs5, AesEncryptPkcs7, AesEncryptPkcs7Base64, AesEncryptPkcs7Base64ForPool, AesEncrypt, AesDecryptSimple, AesDecryptPkcs5 等 15 项；关键函数/方法: AesEncryptSimple, AesEncryptPkcs5, AesEncryptPkcs7, AesEncryptPkcs7Base64, AesEncryptPkcs7Base64ForPool, AesEncrypt, AesDecryptSimple 等 15 项；用于 该包实现 aes 相关逻辑。 |
| `pkg/wkutil/arrays.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 无（无 import）；导出: ArrayContains, ArrayEqual, ArrayContainsUint64, ArrayContainsUint32, RemoveUint64, ArrayEqualUint64；关键函数/方法: ArrayContains, ArrayEqual, ArrayContainsUint64, ArrayContainsUint32, RemoveUint64, ArrayEqualUint64；用于 该包实现 arrays 相关逻辑。 |
| `pkg/wkutil/bitmap.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 fmt, hash/crc32 等 4 项；导出: SlotBitMap, NewSlotBitMap, NewSlotBitMapWithBits, NewSlotBitMapFromFormat, SlotsContains, GetSlotNum, GetSlotFillFormat；关键函数/方法: NewSlotBitMap, NewSlotBitMapWithBits, NewSlotBitMapFromFormat, SlotsContains, GetSlotNum, GetSlotFillFormat, (*SlotBitMap).SetSlot, (*SlotBitMap).SetSlotForRange 等 17 项；用于 该包实现 bitmap 相关逻辑。 |
| `pkg/wkutil/channel.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 strconv, strings；导出: ChannelToKey, ChannelFromlKey；关键函数/方法: ChannelToKey, ChannelFromlKey；用于 该包实现 channel 相关逻辑。 |
| `pkg/wkutil/common.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 bytes, encoding/base64 等 8 项；导出: BoolToInt, IntToBool, BoolToUint8, Uint8ToBool, ToJSON, JSONToMap, ReadJSONByByte, DecimalToAny 等 14 项；关键函数/方法: BoolToInt, IntToBool, BoolToUint8, Uint8ToBool, ToJSON, JSONToMap, ReadJSONByByte, DecimalToAny 等 14 项；用于 该包实现 common 相关逻辑。 |
| `pkg/wkutil/convert.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 strconv；导出: StringToUint8；关键函数/方法: StringToUint8；用于 该包实现 convert 相关逻辑。 |
| `pkg/wkutil/data_pipeline.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 外部 go.uber.org/atomic, go.uber.org/zap，内部 github.com/WuKongIM/WuKongIM/pkg/wklog，标准库 errors, sync 等 3 项；导出: DataPipeline, NewDataPipeline, ErrDataNotEnough；关键函数/方法: NewDataPipeline, (*DataPipeline).Append, (*DataPipeline).Start, (*DataPipeline).Stop, (*DataPipeline).run, (*DataPipeline).onStop, (*DataPipeline).flushToNode；用于 该包实现 data_pipeline 相关逻辑。 |
| `pkg/wkutil/dedup.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 无（无 import）；导出: DedupStats, RemoveRepeatedElementGeneric, RemoveRepeatedElementSorted, RemoveRepeatedElementAndSort, RemoveRepeatedElementOptimized, RemoveRepeatedElementInPlace, RemoveRepeatedElementWithCapacity, StringSliceDedup 等 13 项；关键函数/方法: RemoveRepeatedElementGeneric, RemoveRepeatedElementSorted, RemoveRepeatedElementAndSort 等 12 项；用于 该包实现 dedup 相关逻辑。 |
| `pkg/wkutil/dh.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 外部 golang.org/x/crypto/curve25519，标准库 crypto/rand, io；导出: GetCurve25519KeypPair, GetCurve25519Key；关键函数/方法: GetCurve25519KeypPair, GetCurve25519Key；用于 该包实现 dh 相关逻辑。 |
| `pkg/wkutil/encode.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 bytes, encoding/gob；导出: EncodeToBytes, DecodeFromBytes；关键函数/方法: EncodeToBytes, DecodeFromBytes；用于 该包实现 encode 相关逻辑。 |
| `pkg/wkutil/fifo.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 无（无 import）；导出: FIFO, NewFIFO；关键函数/方法: NewFIFO, (*FIFO).Push, (*FIFO).Pop, (*FIFO).Len, (*FIFO).Data；用于 该包实现 fifo 相关逻辑。 |
| `pkg/wkutil/file.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 io, os；导出: CopyFile, WriteFile, ReadFile, FileExists, RemoveFile；关键函数/方法: CopyFile, WriteFile, ReadFile, FileExists, RemoveFile；用于 该包实现 file 相关逻辑。 |
| `pkg/wkutil/hash.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 hash/crc32；导出: HashCrc32；关键函数/方法: HashCrc32；用于 该包实现 hash 相关逻辑。 |
| `pkg/wkutil/ip.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 errors, io 等 6 项；导出: GetExternalIP, GetIntranetIP, IsIntranet；关键函数/方法: GetExternalIP, GetIntranetIP, IsIntranet；用于 该包实现 ip 相关逻辑。 |
| `pkg/wkutil/json.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 bytes, encoding/json；导出: ToJson, JsonToMap, ReadJsonByByte；关键函数/方法: ToJson, JsonToMap, ReadJsonByByte；用于 该包实现 json 相关逻辑。 |
| `pkg/wkutil/md5.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 crypto/md5, encoding/hex；导出: MD5, MD5Bytes；关键函数/方法: MD5, MD5Bytes；用于 该包实现 md5 相关逻辑。 |
| `pkg/wkutil/parse.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 strconv；导出: ParseInt, ParseUint8, ParseInt64, ParseUint64, ParseUint32, ParseFloat64, ParseBool, Uint64ToString 等 9 项；关键函数/方法: ParseInt, ParseUint8, ParseInt64, ParseUint64, ParseUint32, ParseFloat64, ParseBool, Uint64ToString 等 9 项；用于 该包实现 parse 相关逻辑。 |
| `pkg/wkutil/rate.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 math, sync/atomic；导出: RateLimiter, InMemRateLimiter, NewRateLimiter, NewInMemRateLimiter, ChangeTickThreashold；关键函数/方法: NewRateLimiter, NewInMemRateLimiter, (*RateLimiter).Enabled, (*RateLimiter).Increase, (*RateLimiter).Decrease, (*RateLimiter).Set, (*RateLimiter).Get, (*RateLimiter).RateLimited 等 20 项；用于 该包实现 rate 相关逻辑。 |
| `pkg/wkutil/ring_buffer.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 内部 github.com/WuKongIM/WuKongIM/pkg/pool/ringbuffer, github.com/WuKongIM/WuKongIM/pkg/ring，标准库 io；导出: RingBuffer；关键函数/方法: (*RingBuffer).Done, (*RingBuffer).Peek, (*RingBuffer).Discard, (*RingBuffer).Read, (*RingBuffer).ReadByte, (*RingBuffer).Write, (*RingBuffer).WriteByte, (*RingBuffer).Buffered 等 20 项；用于 该包实现 ring_buffer 相关逻辑。 |
| `pkg/wkutil/time.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 time；导出: ToyyyyMMddHHmm, ToyyyyMMddHHmmss, ToyyyyMM2, ToyyyyMMdd, PareTimeStrForYYYYMMdd, Toyyyy_MM_dd, Toyyyy_MM, PareTimeStrForYYYY_mm_dd 等 9 项；关键函数/方法: ToyyyyMMddHHmm, ToyyyyMMddHHmmss, ToyyyyMM2, ToyyyyMMdd, PareTimeStrForYYYYMMdd, Toyyyy_MM_dd, Toyyyy_MM, PareTimeStrForYYYY_mm_dd 等 9 项；用于 该包实现 time 相关逻辑。 |
| `pkg/wkutil/uuid.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 外部 github.com/google/uuid，标准库 strings；导出: GenUUID；关键函数/方法: GenUUID, init；用于 该包实现 uuid 相关逻辑。 |
| `pkg/wkutil/wait_group.go` | 位于 pkg/wkutil 的模块实现。导入/依赖: 标准库 sync, sync/atomic；导出: WaitGroupWrapper, NewWaitGroupWrapper；关键函数/方法: NewWaitGroupWrapper, (*WaitGroupWrapper).Wrap, (*WaitGroupWrapper).GoroutineCount；用于 该包实现 wait_group 相关逻辑。 |
